(function(){var n,t,e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,z,I,M,A,P,F,j,R,L,B,V,D,H,G,U,K,J,Q,Z,nt,tt,et,rt,it,ot,ut,at,st,ct,lt,ft,ht,dt,pt,vt,gt,mt,wt,bt,yt,_t,kt,xt,Ct,St,qt,Nt,Wt,Tt,Ot,Et,Yt,Xt,zt,It,Mt,At,Pt,Ft,jt,Rt,Lt,Bt,Vt,Dt,Ht,Gt,Ut,$t,Kt,Jt,Qt,Zt,ne,te,ee,re,ie,oe,ue,ae,se,ce,le,fe,he,de,pe,ve,ge,me,we,be,ye,_e,ke,xe,Ce,Se,qe,Ne,We,Te,Oe,Ee,Ye,Xe,ze,Ie,Me,Ae,Pe,Fe,je,Re,Le,Be,Ve,De,He,Ge,Ue,$e,Ke,Je,Qe,Ze,nr,tr,er,rr,ir,or,ur,ar,sr,cr,lr,fr,hr,dr,pr,vr,gr,mr,wr,br,yr,_r,kr,xr,Cr,Sr,qr,Nr,Wr,Tr,Or,Er,Yr,Xr,zr,Ir,Mr,Ar,Pr,Fr,jr,Rr,Lr,Br,Vr,Dr,Hr,Gr,Ur,$r,Kr,Jr,Qr,Zr,ni,ti,ei,ri,ii,oi,ui,ai,si,ci,li,fi,hi,di,pi,vi,gi,mi,wi,bi,yi,_i,ki,xi,Ci,Si,qi,Ni,Wi,Ti,Oi,Ei,Yi,Xi,zi,Ii,Mi,Ai,Pi,Fi,ji,Ri,Li,Bi,Vi,Di,Hi,Gi,Ui,$i,Ki,Ji,Qi,Zi,no,to,eo,ro,io,oo,uo,ao,so,co,lo,fo,ho,po,vo,go,mo,wo,bo,yo,_o,ko,xo,Co,So,qo,No,Wo,To,Oo,Eo,Yo,Xo,zo,Io,Mo,Ao,Po,Fo,jo,Ro,Lo,Bo,Vo,Do,Ho,Go,Uo,$o,Ko,Jo,Qo,Zo,nu,tu,eu,ru,iu,ou,uu,au,su,cu,lu,fu,hu,du,pu,vu,gu,mu,wu,bu,yu,_u,ku,xu,Cu,Su,qu,Nu,Wu,Tu,Ou,Eu,Yu,Xu,zu,Iu,Mu,Au,Pu,Fu,ju,Ru,Lu,Bu,Vu,Du,Hu,Gu,Uu,$u,Ku,Ju,Qu,Zu,na,ta,ea,ra,ia,oa,ua,aa,sa,ca,la,fa,ha,da,pa,va,ga,ma,wa,ba,ya,_a,ka,xa,Ca=[].slice,Sa=function(n,t){function e(){this.constructor=n}for(var r in t)qa.call(t,r)&&(n[r]=t[r]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},qa={}.hasOwnProperty;wa=Math.PI,ba=2*wa,st=wa/2,ma=1e-6,K=ma*ma,Lt=wa/180,R=180/wa,Ye=Math.tan(30*Lt),ve=Math.sqrt(3),x=16581375,Me="transparent",Ee="undefined",qe="null",ke="Boolean",Oe="String",Ne="Number",Se="Function",We="Object",_e="Array",ye="Arguments",xe="Date",Te="RegExp",Ce="Error",va=function(n){var t;if(t=Object.prototype.toString.call(n),null===n)return qe;if(void 0===n)return Ee;if(n===!0||n===!1||"[object Boolean]"===t)return ke;switch(t){case"[object String]":return Oe;case"[object Number]":return Ne;case"[object Function]":return Se;case"[object Object]":return We;case"[object Array]":return _e;case"[object Arguments]":return ye;case"[object Date]":return xe;case"[object RegExp]":return Te;case"[object Error]":return Ce;default:return t}},St=function(){function n(n,t){this.match=n,this.func=t}return n}(),_i=function(){var n,t;return n=function(t){var e,r,i;switch(r=va(t)){case Ee:return function(n){return void 0===n};case qe:return function(n){return null===n};case ke:return function(n){return t===Boolean||n===t};case Oe:return function(n){return t===String||n===t};case Ne:return function(n){return t===Number||n===t||_.isNaN(n)&&_.isNaN(t)};case Te:return function(){return t===RegExp};case Error:return function(){return t===Error};case xe:return function(n){return t===Date||n===t};case _e:return 1===t.length&&Se===(i=va(t[0]))?(e=n(t[0]),function(n){var t,r,i;if(_e!==va(n))return!1;for(r=0,i=n.length;i>r;r++)if(t=n[r],!e(t))return!1;return!0}):function(n){return t===Array||cr(t,n)};case Se:return function(n){var e;return n instanceof t?!0:n&&n.constructor===t?!0:(e=va(n),t===Boolean&&e===ke||t===String&&e===Oe||t===Number&&e===Ne)};case We:return function(n){var e,r;for(e in t)if(r=t[e],n[e]!==r)return!1;return!0};default:return function(){return!1}}},t=function(t){var e;return e=_.map(t,n),function(n){var t,r,i,o;if(0===n.length)return!1;if(n.length!==e.length)return!1;for(r=i=0,o=e.length;o>i;r=++i)if(t=e[r],!t(n[r]))return!1;return!0}},function(){var n,e;return n=1<=arguments.length?Ca.call(arguments,0):[],e=_.map(n,function(n){var e,r,i;return r=2<=n.length?Ca.call(n,0,i=n.length-1):(i=0,[]),e=n[i++],new St(t(r),e)}),function(){var n,t,r,i;for(n=1<=arguments.length?Ca.call(arguments,0):[],r=0,i=e.length;i>r;r++)if(t=e[r],t.match(n))return t.func.apply(null,n);throw new Error("Pattern match failure for args [ "+_.map(n,function(n){return""+n+":"+va(n)}).join(", ")+" ]")}}}(),sr=function(n,t){return new(n.bind.apply(n,[null].concat(t)))},g=function(){function n(n,t){this.put=n,this.test=t}return n}(),Ct=function(){function n(n,t){this.put=n,this.test=t}return n}(),le=function(){function n(n,t){this.width=n,this.height=t}return n}(),Dt=function(){function n(n,t,e,r){this.left=n,this.top=t,this.width=e,this.height=r}return n}(),Ke=function(){function n(n,t,e,r,i,o,u){this.name=n,this.label=t,this.type=e,this.at=r,this.count=i,this.domain=o,this.format=u}return n}(),Q=function(n){function t(n,e,r,i,o,u,a,s){this.valueAt=o,t.__super__.constructor.call(this,n,e,r,i,u,a,s)}return Sa(t,n),t}(Ke),bt=function(n){function t(n,e,r,i,o,u){t.__super__.constructor.call(this,n,e,We,r,i,o,u)}return Sa(t,n),t}(Ke),ut=function(){function n(){}return n}(),it=function(){function n(n,t,e,r,i,o,u,a,s){this.label=n,this.vectors=t,this.schema=e,this.indices=r,this.cube=i,this.at=o,this.evaluate=u,this.attach=a,this.metadata=s}return n}(),Ae=function(){function n(n){this.value=n}return n}(),qt=function(n){function t(n){t.__super__.constructor.call(this,n)}return Sa(t,n),t}(Ae),ge=function(n){function t(n){t.__super__.constructor.call(this,n)}return Sa(t,n),t}(Ae),j=function(n){function t(n){t.__super__.constructor.call(this,n)}return Sa(t,n),t}(Ae),a=function(n){function t(n){t.__super__.constructor.call(this,n)}return Sa(t,n),t}(Ae),nt=function(){function n(n){this.name=n}return n}(),yt=function(n){function t(n){this.evaluate=n}return Sa(t,n),t}(nt),Gt=function(n){function t(n){this.evaluate=n}return Sa(t,n),t}(nt),tt=function(){function n(n,t){this.color=n,this.opacity=t}return n}(),me=function(){function n(n,t,e){this.color=n,this.opacity=t,this.size=e}return n}(),re=function(){function n(n){this.fields=n}return n}(),Vt=function(){function n(n){this.index=n}return n}(),xt=function(){function n(){}return n}(),zt=function(n){function t(n,t,e,r,i,o,u,a,s){this.position=n,this.shape=t,this.size=e,this.fillColor=r,this.fillOpacity=i,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=s}return Sa(t,n),t}(xt),Tt=function(n){function t(n,t,e,r,i){this.position=n,this.strokeColor=t,this.strokeOpacity=e,this.lineWidth=r,this.tooltip=i}return Sa(t,n),t}(xt),$t=function(n){function t(n,t,e,r,i){this.position=n,this.strokeColor=t,this.strokeOpacity=e,this.lineWidth=r,this.tooltip=i}return Sa(t,n),t}(xt),Ht=function(n){function t(n,t,e,r,i,o,u,a,s){this.position=n,this.width=t,this.height=e,this.fillColor=r,this.fillOpacity=i,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=s}return Sa(t,n),t}(xt),e=function(){function n(){}return n}(),gt=function(n){function t(n,t,e,r){this.position=n,this.strokeColor=t,this.strokeOpacity=e,this.lineWidth=r}return Sa(t,n),t}(e),t=function(){function n(){}return n}(),vt=function(n){function t(n,t,e,r,i){this.slope=n,this.intercept=t,this.strokeColor=e,this.strokeOpacity=r,this.lineWidth=i,this.render=Qu}return Sa(t,n),t}(t),kt=function(){function n(){}return n}(),Mt=function(n){function t(n,t,e,r,i,o,u,a,s,c,l){this.space=n,this.positionX=t,this.positionY=e,this.shape=r,this.size=i,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=s,this.lineWidth=c,this.tooltip=l,this.geometry=It}return Sa(t,n),t}(kt),Qt=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.space=n,this.q0=t,this.q1=e,this.q2=r,this.q3=i,this.qn=o,this.positionY=u,this.height=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f,this.geometry=Jt}return Sa(t,n),t}(kt),te=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.space=n,this.positionX=t,this.q0=e,this.q1=r,this.q2=i,this.q3=o,this.qn=u,this.width=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f,this.geometry=ne}return Sa(t,n),t}(kt),b=function(n){function t(n,t,e,r,i,o,u,a,s,c,l){this.space=n,this.positionX=t,this.positionY1=e,this.positionY2=r,this.width=i,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=s,this.lineWidth=c,this.tooltip=l,this.geometry=w}return Sa(t,n),t}(kt),u=function(n){function t(n,t,e,r,i,u,a,s,c,l,f){this.space=n,this.positionX1=t,this.positionX2=e,this.positionY=r,this.height=i,this.fillColor=u,this.fillOpacity=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f,this.geometry=o}return Sa(t,n),t}(kt),Et=function(n){function t(n,t,e,r,i,o,u){this.space=n,this.positionX=t,this.positionY=e,this.strokeColor=r,this.strokeOpacity=i,this.lineWidth=o,this.tooltip=u,this.geometry=Ot}return Sa(t,n),t}(kt),U=function(){function n(){}return n}(),Xt=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX=n,this.positionY=t,this.shape=e,this.size=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Sa(t,n),t}(U),Kt=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.q0=n,this.q1=t,this.q2=e,this.q3=r,this.qn=i,this.positionY=o,this.height=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Sa(t,n),t}(U),Zt=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX=n,this.q0=t,this.q1=e,this.q2=r,this.q3=i,this.qn=o,this.width=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Sa(t,n),t}(U),m=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX=n,this.positionY1=t,this.positionY2=e,this.width=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Sa(t,n),t}(U),i=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX1=n,this.positionX2=t,this.positionY=e,this.height=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Sa(t,n),t}(U),Wt=function(n){function t(n,t,e,r,i,o,u){this.positionX=n,this.positionY=t,this.stroke=e,this.strokeColor=r,this.strokeOpacity=i,this.lineWidth=o,this.tooltip=u}return Sa(t,n),t}(U),pe=function(){function n(n,t){this.x=n,this.y=t}return n}(),de=function(){function n(n,t,e){this.type=n,this.vectors=t,this.domain=e}return n}(),r=function(){function n(){}return n}(),f=function(n){function t(n,t,e,r,i,o,u){this.type=n,this.label=t,this.scale=e,this.domain=r,this.range=i,this.rect=o,this.guide=u}return Sa(t,n),t}(r),Ft=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(r),wt=function(n){function t(n,t,e,r,i,o,u){this.type=n,this.label=t,this.scale=e,this.domain=r,this.range=i,this.rect=o,this.guide=u}return Sa(t,n),t}(Ft),Xe=function(){function n(n,t){this.value=n,this.label=t}return n}(),G=function(){function n(n,t){this.label=n,this.encode=t}return n}(),N=function(n){function t(n){this.value=n,t.__super__.constructor.call(this,"Constant",ar(this.value))}return Sa(t,n),t}(G),Fe=function(n){function t(n,e,r){this.vector=r,t.__super__.constructor.call(this,n,e)}return Sa(t,n),t}(G),Ie=function(n){function t(n){this.vectors=n,t.__super__.constructor.call(this,"tooltips")}return Sa(t,n),t}(G),Pt=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Sa(t,n),t}(Fe),k=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Sa(t,n),t}(Fe),Nt=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Sa(t,n),t}(Fe),he=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Sa(t,n),t}(Fe),ae=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Sa(t,n),t}(Fe),v=function(){function n(){}return n}(),y=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),A=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),At=function(n){function t(n){this.coordinates=n}return Sa(t,n),t}(v),et=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),rt=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),we=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),be=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),fe=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),nr=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),lt=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),mt=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),ue=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),ze=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(v),q=function(n){function t(n){this.value=n}return Sa(t,n),t}(A),Pe=function(n){function t(n){this.field=n}return Sa(t,n),t}(A),W=function(n){function t(n){this.value=n}return Sa(t,n),t}(et),je=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(et),T=function(n){function t(n){this.value=n}return Sa(t,n),t}(rt),Re=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(rt),z=function(n){function t(n){this.value=n}return Sa(t,n),t}(we),He=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(we),I=function(n){function t(n){this.value=n}return Sa(t,n),t}(be),Ge=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(be),X=function(n){function t(n){this.value=n}return Sa(t,n),t}(fe),De=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(fe),M=function(n){function t(n){this.value=n}return Sa(t,n),t}(nr),$e=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(nr),O=function(n){function t(n){this.value=n}return Sa(t,n),t}(lt),Le=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(lt),E=function(n){function t(n){this.value=n}return Sa(t,n),t}(mt),Be=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(mt),Y=function(n){function t(n){this.value=n}return Sa(t,n),t}(ue),Ve=function(n){function t(n,t){this.field=n,this.range=t}return Sa(t,n),t}(ue),Ue=function(n){function t(n){this.fields=n}return Sa(t,n),t}(ze),J=function(){function n(n,t){this.min=n,this.max=t}return n}(),D=function(){function n(n,t){this.min=n,this.max=t}return n}(),H=function(){function n(n,t){this.min=n,this.max=t}return n}(),Bt=function(){function n(){}return n}(),h=function(n){function t(n){this.values=n}return Sa(t,n),t}(Bt),jt=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(Bt),oe=function(n){function t(n,t){this.min=n,this.max=t}return Sa(t,n),t}(jt),V=function(n){function t(n,t,e){this.min=n,this.mid=t,this.max=e}return Sa(t,n),t}(jt),S=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Sa(t,n),t}(Bt),ie=function(n){function t(n,t){this.min=n,this.max=t}return Sa(t,n),t}(S),B=function(n){function t(n,t,e){this.min=n,this.mid=t,this.max=e}return Sa(t,n),t}(S),ot=function(){function n(n,t,e,r,i){this.encode=n,this.mask=t,this.highlight=e,this.render=r,this.select=i}return n}(),F=function(){function n(n){this.read=n}return n}(),l=function(){function n(n,t,e,r){this.element=n,this.context=t,this.bounds=e,this.ratio=r}return n}(),Je=function(){function n(n,t,e,r,i,o,u,a,s,c,l){this.box=n,this.container=t,this.baseCanvas=e,this.highlightCanvas=r,this.hoverCanvas=i,this.maskCanvas=o,this.clipCanvas=u,this.marquee=a,this.tooltip=s,this.mask=c,this.clip=l}return n}(),ht=function(){function n(n,t,e,r,i,o){this.encodings=n,this.encoders=t,this.mask=e,this.highlight=r,this.render=i,this.select=o}return n}(),Qe=function(){function n(n,t,e,r,i,o,u,a){this.viewport=n,this.frame=t,this.test=e,this.highlight=r,this.hover=i,this.selectAt=o,this.selectWithin=u,this.render=a}return n}(),Yt=function(){function n(n,t,e){this.element=n,this.subscribe=t,this.unsubscribe=e}return n}(),s=function(){function n(n,t){this.width=n,this.height=t}return n}(),Ut=function(){function n(n,t,e,r,i){this.center=n,this.left=t,this.top=e,this.right=r,this.bottom=i}return n}(),_t=function(){function n(n,t,e,r){this.left=n,this.top=t,this.right=e,this.bottom=r}return n}(),c=function(){function n(n,t,e){var r;this.width=n,this.height=t,this.margin=e,this.regions=new Ut(r=new Dt(e.left,e.top,n-e.left-e.right,t-e.top-e.bottom),new Dt(0,e.top,e.left,r.height),new Dt(e.left+r.width,e.top,e.right,r.height),new Dt(e.left,0,r.width,e.top),new Dt(e.left,e.top+r.height,r.width,e.bottom))}return n}(),Rt=function(){function n(n,t,e,r){this.where=n,this.limit=t,this.group=e,this.having=r}return n}(),d=function(){function n(n,t){this.key=n,this.value=t}return n}(),n=new d(0,"All"),P=function(){function n(n,t,e,r){this.frame=n,this.hierarchy=t,this.cells=e,this.dimension=r}return n}(),dt=function(){function n(n,t,e){this.category=n,this.indices=t,this.children=e}return n}(),p=function(){function n(n,t){this.levels=n,this.indices=t}return n}(),Z=function(){function n(n,t,e,r,i){this.at=n,this.valueAt=t,this.count=e,this.domain=r,this.format=i}return n}(),at=function(){function n(n){this.fields=n}return n}(),Ze=function(){function n(n,t){this.fields=n,this.predicate=t}return n}(),pt=function(){function n(n,t){this.offset=n,this.length=t}return n}(),ct=function(){function n(n,t){this.fields=n,this.predicate=t}return n}(),ft=function(){function n(n,t){this.vectors=n,this.index=t}return n}(),ee=function(){function n(n,t){this.vectors=n,this.indices=t}return n}(),L=function(){function n(n){this.vectors=n}return n}(),hr=function(n){var t;return t=parseFloat(n),_.isNaN(t)?void 0:t},fr=function(n){var t;return t=parseInt(n,10),_.isNaN(t)?void 0:t},lr=function(n){return null!=n?n:void 0},da=function(n){return n*n},mr=function(n,t){return function(e){return n>e?n:e>t?t:e}},gr=mr(0,1),yi=8,Er=function(n){return n.slice(0)},vo=function(n,t){var e,r,i,o,u,a,s,c;for(i=[],o=0,a=n.length;a>o;o++)for(e=n[o],c=t(e),u=0,s=c.length;s>u;u++)r=c[u],i.push(r);return i},Ao=function(){var n,t;return t=arguments[0],n=2<=arguments.length?Ca.call(arguments,1):[],function(){return t.apply(null,n)}},ar=function(n){return function(){return n}},cr=function(n,t){var e,r,i,o;if(n&&t&&n.length===t.length){for(e=i=0,o=n.length;o>i;e=++i)if(r=n[e],r!==t[e])return!1;return!0}return!1},co=function(){var n,t,e,r,i,o,u,a,s;for(t=arguments[0],i=2<=arguments.length?Ca.call(arguments,1):[],e=[],o=0,a=t.length;a>o;o++)for(n=t[o],u=0,s=i.length;s>u;u++)r=i[u],n instanceof r&&e.push(n);return e},ho=function(){var n,t,e,r,i,o,u,a;for(t=arguments[0],r=2<=arguments.length?Ca.call(arguments,1):[],i=0,u=t.length;u>i;i++)for(n=t[i],o=0,a=r.length;a>o;o++)if(e=r[o],n instanceof e)return n},po=function(n,t){var e,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)e=t[r],o.push(ho(n,e));return o},Gr=function(n,t){return t>n?new J(n,t):new J(t,n)},qr=function(n){var t,e,r,i,o;for(e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=0,o=n.length;o>i;i++)r=n[i],void 0!==r&&(e>=r&&(e=r),r>=t&&(t=r));return new J(e,t)},Nr=function(n,t){var e,r,i,o,u;for(i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,e=u=0;n>=0?n>u:u>n;e=n>=0?++u:--u)void 0!==(o=t(e))&&(i>=o&&(i=o),o>=r&&(r=o));return new J(i,r)},Or=function(n){return function(t){return t.min>=n&&t.max>n?1:t.min<n&&t.max<=n?-1:0}},Tr=Or(0),xr=function(n,t){return new J(Math.min(n.min,t.min),Math.max(n.max,t.max))},Co=function(n){return function(t){return t.min>n&&t.max>n?new J(n,t.max):t.min<n&&t.max<n?new J(t.min,n):t}},xo=Co(0),Oi=function(n,t,e){return $.ajax({dataType:n,url:t,success:function(n){return e(null,n)},error:function(n,t,r){return e(r)}})},ti=function(n,t,e){var r,i,o;return i=function(){return t.length},r=function(n){return t[n]},o=e?function(n){return e(t[n],n)}:r,new bt(n,n,r,i,t,o)},mi=function(n,t,e,r){return xa(n,n,t,e,r)},xa=function(n,t,e,r,i){var o,u,a,s;return a=qr(r),u=function(){return r.length},o=function(n){return r[n]},s=i?function(n){return i(r[n],n)}:o,new Ke(n,t,e,o,u,a,s)},Qr=function(n,t,e,r,i,o){var u,a;return u=Nr(r,i),a=o?function(n){return o(i(n),n)}:i,new Ke(n,t,e,i,r,u,a)},so=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,p,v,g;for(g=0,p={},l=t(),o=new Array(l),u=function(){var n,t,r;for(r=[],n=0,t=e.length;t>n;n++)f=e[n],r.push(p[f]=new d(g++,f));return r}(),c=v=0;l>=0?l>v:v>l;c=l>=0?++v:--v)a=n(c),f=void 0!==a?a:"?",(i=p[f])||u.push(p[f]=i=new d(g++,f)),o[c]=i;return r=function(n){return o[n]},h=function(n){return o[n].value},s=function(n){return o[n].value},new Z(r,h,t,u,s)},Ur=function(n,t,e,r){var i,o,u;return o=function(){return e.length},i=function(n){return e[n]},u=so(i,o,r||[]),new Q(n,n,t,u.at,u.valueAt,o,u.domain,u.format)},Xr=function(n,t){var e,r,i,o,u,a;return i="All",r=new d(0,i),a=function(){return i},e=function(){return r},o=function(){return t},u=function(){return i},new Q(n,n,Oe,e,a,o,[r],u)},Jr=function(n,t,e,r,i){var o,u;return u=_.indexBy(t,function(n){return n.name}),o=new it(n,t,u,e,r,null,null,null,i||{}),o.evaluate=function(t){var e,i,a,s;return i=_.isArray(t)?t:[t],a=function(){var a,c,l;for(l=[],a=0,c=i.length;c>a;a++)if(e=i[a],e instanceof yt)l.push(o.evaluate(e.evaluate(o)));else if(e instanceof Gt){if(!r)throw new Error("Cannot compute aggregate ["+e.name+"] on an unaggregated frame.");l.push(o.evaluate(e.evaluate(o,r)))}else{if(!(e instanceof nt))throw new Error("Cannot evaluate ["+t+"] on frame ["+n+"].");if(!(s=u[e.name]))throw new Error("Vector ["+e.name+"] does not exist in frame ["+n+"].");l.push(s)}return l}(),_.flatten(a)},o.attach=function(e){if(u[e.name])throw new Error("Cannot attach vector ["+e.name+"]: a vector by that name already exists in frame ["+n+"]");return t.push(e),u[e.name]=e,e},o.exists=function(n){return u[n]?!0:!1},o},Fi=function(n){var t,e,r,i,o,u,a,s,c,l,f;for(u=new Array(n.indices.length),e=_.map(n.vectors,function(n){return n instanceof Q?n.valueAt:n.at}),f=n.indices,a=0,c=f.length;c>a;a++)for(r=f[a],u[r]=o=new Array(n.vectors.length),i=s=0,l=e.length;l>s;i=++s)t=e[i],o[i]=t(r);return u},si=function(n){return new Rt(co(n,Ze),co(n,pt),co(n,at),co(n,ct))},Kr=function(n){return _.map(n,function(n){return new nt(n)})},$r=function(n){return new yt(function(t){var e,r,i,o,u,a,s,c;if(s=_.head(t.evaluate(n)),s instanceof Q)return n;for(u=s.count(),e=s.at,i=new Array(u),o=c=0;u>=0?u>c:c>u;o=u>=0?++c:--c)void 0!==(a=e(o))&&(i[o]=""+a);return t.attach(r=Ur("factor("+s.label+")",Oe,i)),[new nt(r.name)]})},zr=function(n){return new yt(function(t){return t.attach(Xr(n,t.indices.length)),[new nt(n)]})},Qo=_i([String,function(n){return Qo(new nt(n))}],[nt,function(n){return $r(n)}],[ge,function(n){var t;return t=n.value,zr(t)}]),pi=function(n,t){return new yt(function(e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q;if(b=_.head(e.evaluate(n)),b instanceof Q)throw new Error("Cannot stack factor ["+b.label+"]: expecting vector.");for(d=b.count(),m=new Array(d),c=new Array(d),g="low("+b.name+", "+t+")",s="high("+b.name+", "+t+")",r=b.at,o=e.cube,t=Math.min(t,o.dimension),i=o.cells,v=a=0,y=new Array(t),q=e.indices,k=0,S=q.length;S>k;k++){for(l=q[k],p=i[l].levels,f=x=0;t>=0?t>x:x>t;f=t>=0?++x:--x)if(y[f]!==p[f].category){for(v=a=0,h=C=0;t>=0?t>C:C>t;h=t>=0?++C:--C)y[h]=p[h].category;break}w=r(l),0>w?(m[l]=v,c[l]=v+=w):(m[l]=a,c[l]=a+=w)}return u=function(n,t){return b.format(t)},e.attach(xa(g,b.name,b.type,m,u)),e.attach(xa(s,b.name,b.type,c,u)),[new nt(g),new nt(s)]})},Tu=_i([String,Number,function(n,t){return Tu(new nt(n),t)}],[nt,Number,function(n,t){return pi(n,t)}]),Pu=function(n){var t;return t=mr(0,n.length-1),function(e){return n[t(-1+Math.round(e*n.length))]}},Wr=function(n){var t,e,r,i,o,u,a,s;return s=function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)a=n[t],(a||0===a)&&r.push(a);return r}(),s.sort(function(n,t){return n-t}),e=s[0],t=s[s.length-1],u=Pu(s),r=u(.25),i=u(.5),o=u(.75),[e,r,i,o,t]},er=function(n){var t,e,r,i,o;for(e=0,t=0,i=0,o=n.length;o>i;i++)r=n[i],void 0!==r&&(e+=r,t++);return e/t},rr=function(n){var t,e,r,i;for(t=0,r=0,i=n.length;i>r;r++)e=n[r],void 0!==e&&t++;return t},ir=function(n){var t,e,r,i;for(t=Number.NEGATIVE_INFINITY,r=0,i=n.length;i>r;r++)e=n[r],void 0!==e&&e>=t&&(t=e);return t},or=function(n){var t,e,r,i;for(t=Number.POSITIVE_INFINITY,r=0,i=n.length;i>r;r++)e=n[r],void 0!==e&&t>=e&&(t=e);return t},ur=function(n){var t,e,r,i;for(t=0,r=0,i=n.length;i>r;r++)e=n[r],void 0!==e&&(t+=e);return t},Yr=function(n,t,e,r,i){return new Gt(function(o,u){var a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x;if(d=t+"("+n.name+")",o.exists(d))return new nt(d);for(g=_.head(u.frame.evaluate(n)),a=g.at,l=new Array(u.cells.length),k=u.cells,h=m=0,b=k.length;b>m;h=++m){for(s=k[h],v=[],x=s.indices,w=0,y=x.length;y>w;w++)f=x[w],void 0!==(p=a(f))&&v.push(p);l[h]=i(v)}return o.attach(c=mi(d,e,l,r)),[new nt(c.name)]})},Bo=function(n,t,e,r){return _i([String,function(i){return Yr(new nt(i),n,t,e,r)}],[nt,function(i){return Yr(i,n,t,e,r)}])},Go=Bo("count",Ne,_.identity,rr),Vo=Bo("avg",Ne,_.identity,er),pu=Bo("max",Ne,_.identity,ir),vu=Bo("min",Ne,_.identity,or),Yu=Bo("sum",Ne,_.identity,ur),ru=function(){var n,t,e;return t=1<=arguments.length?Ca.call(arguments,0):[],e=function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)if(n=t[e],n instanceof nt)i.push(n);else{if(!_.isString(n))throw new Error("Cannot group by ["+n+"]");i.push(new nt(n))}return i}(),new at(e)},Lo=_i([[String],Function,function(n,t){return new Ze(Kr(n),t)}]),Iu=function(){var n,t,e;return t=2<=arguments.length?Ca.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],Lo(t,n)},lu=_i([Number,Number,function(n,t){return new pt(n,t)}],[Number,function(n){return new pt(0,n)}]),Ro=_i([[String],Function,function(n,t){return new ct(Kr(n),t)}],[[nt],Function,function(n,t){return new ct(n,t)}]),ou=function(){var n,t,e;return t=2<=arguments.length?Ca.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],Ro(t,n)},Jo=function(n){return function(t){return t===n}},gu=function(n){return function(t){return t!==n}},du=function(n){return function(t){return n>t}},iu=function(n){return function(t){return t>n}},su=function(n){return function(t){return n>=t}},eu=function(n){return function(t){return t>=n}},cu=function(n){if(Te!==va(n))throw new Error("like ["+n+"]: expecting RegExp");return function(t){return n.test(t)}},au=function(n){return function(t){var e,r,i;for(r=0,i=n.length;i>r;r++)if(e=n[r],e===t)return!0;return!1}},mu=function(n){return function(t){var e,r,i;for(r=0,i=n.length;i>r;r++)if(e=n[r],e===t)return!1;return!0}},Fu=function(t,e){var r,i,o,u,a,s,c,l,f,h,d;return c=e.where.length?Jr(t.label,t.vectors,fo(t,e.where)):t,h=e.group.length?(s=vo(e.group,function(n){return n.fields}),u=function(){var n,t,e;for(e=[],n=0,t=s.length;t>n;n++){if(a=s[n],d=_.head(c.evaluate(a)),!(d instanceof Q))throw new Error("Cannot group by ["+a.name+"]: not a Factor.");e.push(d)}return e}(),l={0:new dt(n,c.indices,{})},dr(l,u,0),i=[],yr(l[0].children,s.length-1,i,0,new Array(s.length)),o=new P(c,l,i,s.length),r=tr(c.label+"'",o,u),e.having.length?Jr(r.label,r.vectors,fo(r,e.having),r.cube):r):c,e.limit.length?(f=e.limit[e.limit.length-1],Jr(h.label,h.vectors,h.indices.slice(f.offset,f.offset+f.length))):h},fo=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m;for(h=n.indices,f=0,v=t.length;v>f;f++){for(c=t[f],a=[],l=function(){var t,e,r,i;for(r=c.fields,i=[],t=0,e=r.length;e>t;t++)o=r[t],i.push(_.head(n.evaluate(o)));return i}(),i=_.map(l,function(n){return n instanceof Q?n.valueAt:n.at}),d=0,g=h.length;g>d;d++){for(u=h[d],e=new Array(l.length),s=p=0,m=i.length;m>p;s=++p)r=i[s],e[s]=r(u);c.predicate.apply(null,e)&&a.push(u)}h=a}return h},tr=function(n,t,e){var r,i,o;return r=_.range(t.cells.length),o=function(){var n,r,o;for(o=[],i=n=0,r=t.dimension;r>=0?r>n:n>r;i=r>=0?++n:--n)o.push(ao(t,e[i],i));return o}(),Jr(n,o,r,t)},dr=function(n,t,e){var r,i,o,u,a,s,c,l,f,h;r=t[e].at;for(s in n){for(c=n[s],u=c.children,h=c.indices,l=0,f=h.length;f>l;l++)a=h[l],i=r(a),(o=u[i.key])||(u[i.key]=o=new dt(i,[],{})),o.indices.push(a);e<t.length-1&&dr(u,t,e+1)}},yr=function(n,t,e,r,i){var o,u;for(o in n)u=n[o],i[r]=u,r===t?e.push(new p(Er(i),u.indices)):yr(u.children,t,e,r+1,i)},ao=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v;for(a=new Array(n.cells.length),s={},c=[],v=n.cells,f=d=0,p=v.length;p>d;f=++d)o=v[f],a[f]=i=o.levels[e].category,s[i.value]||(s[i.value]=i,c.push(i));return r=function(n){return a[n]},h=function(n){return a[n].value},l=function(n){return a[n].value},u=function(){return a.length},new Q(t.label,t.label,t.type,r,h,u,c,l)},C={c10:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c20:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],c20b:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],c20c:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]},Po=function(n){return n>10?C.c20:C.c10},br=function(n){var t,e,r,i;return i=n.rgb(),r=i[0],e=i[1],t=i[2],chroma.rgb(r,e,t)},kr=function(n,t){return t>=0&&1>t?br(n).alpha(t).css():n.css()},Ei=function(n,t,e,r){var i;return i=Math.sqrt(r/wa),n.beginPath(),n.arc(t,e,i,0,ba,!1),n.closePath()},zi=function(n,t,e,r){var i;return i=.5*Math.sqrt(r),n.save(),n.translate(t,e),n.beginPath(),n.moveTo(i,i),n.lineTo(-i,i),n.lineTo(-i,-i),n.lineTo(i,-i),n.closePath(),n.restore()},Yi=function(n,t,e,r){var i,o;return i=.5*Math.sqrt(r/5),o=3*i,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(o,i),n.lineTo(i,i),n.lineTo(i,o),n.lineTo(-i,o),n.lineTo(-i,i),n.lineTo(-o,i),n.lineTo(-o,-i),n.lineTo(-i,-i),n.lineTo(-i,-o),n.lineTo(i,-o),n.lineTo(i,-i),n.lineTo(o,-i),n.closePath(),n.restore()},Xi=function(n,t,e,r){var i,o;return o=Math.sqrt(r/(2*Ye)),i=o*Ye,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(i,0),n.lineTo(0,o),n.lineTo(-i,0),n.lineTo(0,-o),n.closePath(),n.restore()},Pi=function(n,t,e,r){var i,o;return i=Math.sqrt(r/ve),o=i*ve/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(0,-o),n.lineTo(i,o),n.lineTo(-i,o),n.closePath(),n.restore()},Ii=function(n,t,e,r){var i,o;return i=Math.sqrt(r/ve),o=i*ve/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(0,o),n.lineTo(i,-o),n.lineTo(-i,-o),n.closePath(),n.restore()},Ai=function(n,t,e,r){var i,o;return o=Math.sqrt(r/ve),i=o*ve/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(i,0),n.lineTo(-i,o),n.lineTo(-i,-o),n.closePath(),n.restore()},Mi=function(n,t,e,r){var i,o;return o=Math.sqrt(r/ve),i=o*ve/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(-i,0),n.lineTo(i,-o),n.lineTo(i,o),n.closePath(),n.restore()},ce={circle:Ei,square:zi,cross:Yi,diamond:Xi,triangleUp:Pi,triangleDown:Ii,triangleLeft:Mi,triangleRight:Ai},se={c8:["circle","square","cross","diamond","triangleUp","triangleDown","triangleLeft","triangleRight"]},Fo=function(){return se.c8},aa=function(n){return function(t){return void 0!==t?n(t):void 0}},ii=function(n,t){var e;return e=d3.scale.linear().domain([n.min,n.max]).range([t.min,t.max]).nice(),[aa(e),e.tickFormat,e.ticks]},oi=function(n,t){var e,r,i,o,u,a,s;for(a=0,o={},u=0,s=n.length;s>u;u++)e=n[u],o[e.key]=a++;return r=(t.max-t.min)/n.length/2,i=t.min,aa(function(n){return i+2*o[n.key]*r+r})},Fr=function(n,t){var e,r;return r=t.values,e=r.length,aa(function(n){return r[n.key%e]})},hi=function(n,t){return aa(d3.scale.linear().domain([n.min,n.max]).range([t.min,t.max]))},Vr=function(n,t){return aa(d3.scale.linear().domain([n.min,n.mid,n.max]).range([t.min,t.mid,t.max]))},fi=function(n,t){return aa(chroma.scale([t.min,t.max]).domain([n.min,n.max]).mode("lch"))
},Br=function(n,t){var e,r;return e=chroma.scale([t.min,t.mid]).domain([n.min,n.mid]).mode("lch"),r=chroma.scale([t.mid,t.max]).domain([n.mid,n.max]).mode("lch"),function(t){return void 0!==t?t<n.mid?e(t):r(t):void 0}},Rr=_i([oe,S,fi],[V,S,Br]),ni=_i([oe,oe,hi],[V,V,Vr]),pr=function(n){var t;return t=n.toString(16),1===t.length?"0"+t:t},jr=function(n){var t,e,r,i;return t=n.context,r=n.ratio,e=function(){return"#fff"},i=function(n,e){var i,o,u,a,s;return s=t.getImageData(n*r,e*r,1,1).data,a=s[0],u=s[1],o=s[2],i=s[3],255===a&&255===u&&255===o&&255===i},new g(e,i)},ri=function(n){var t,e,r,i,o,u;return t=n.context,i=n.ratio,u=0,e={},r=function(n){var t,r,i,o;return r=u++,u>=x&&(u=0),e[r]=n,o=r>>16&255,i=r>>8&255,t=255&r,"#"+pr(o)+pr(i)+pr(t)},o=function(n,r){var o,u,a,s,c,l;return l=t.getImageData(n*i,r*i,1,1).data,c=l[0],s=l[1],u=l[2],o=l[3],255===o?(a=(c<<16)+(s<<8)+u,e[a]):void 0},new Ct(r,o)},Ji=function(n,t){var e,r,i,o,u,a,s;return s=n.scale,r=n.domain,a=n.range,o=n.guide,u=t.label,e=t.at,i=function(n){return s(e(n))},new Pt(u,i,t,r,a,o)},Vi=function(n,t){return new N(n.scale(t))},Bi=function(n,t){var e,r,i,o,u,a,s;return t instanceof je||t instanceof He?(s=_.head(n.evaluate(t.field)),s instanceof Q?(t.range||(t.range=new h(Po(s.domain.length))),u=Fr(s.domain,t.range),e=s.at,i=function(n){return chroma(u(e(n)))},new k(s.label,i,s,s.domain,t.range,null)):(r=function(){switch(Tr(s.domain)){case 1:return new oe(s.domain.min,s.domain.max);case-1:return new oe(s.domain.min,s.domain.max);default:return new V(s.domain.min,0,s.domain.max)}}(),a=Tr(r),o=t.range?t.range instanceof B?r instanceof oe?1===a?new ie(t.range.mid,t.range.max):new ie(t.range.min,t.range.mid):t.range:(r instanceof V?r=new oe(r.min,r.max):void 0,t.range):r instanceof oe?1===a?new ie("#deebf7","#3182bd"):new ie("#e6550d","#fee6ce"):new B("#fc8d59","#ffffbf"),u=Rr(r,o),e=s.at,i=function(n){return u(e(n))},new k(s.label,i,s,r,o,null))):new N(t.value)},Ui=function(n,t){var e,r,i,o,u,a;if(t instanceof Re||t instanceof Ge){if(a=_.head(n.evaluate(t.field)),a instanceof Q)throw new Error("Could not encode opacity. Vector ["+a.label+"] is a Factor.");return r=new oe(a.domain.min,a.domain.max),o=t.range?new oe(gr(t.range.min),gr(t.range.max)):t.range=new oe(.05,1),u=ni(r,o),e=a.at,i=function(n){return u(e(n))},new Nt(a.label,i,a,r,o,null)}return new N(gr(t.value))},ro=function(n,t){var e,r;return n&&t?(e=n.encode,r=t.encode,new Fe("("+n.label+", "+t.label+")",function(n){return kr(e(n),r(n))})):void 0},uo=function(n,t){return function(e,r,i){var o,u,a,s,c,l;if(r instanceof n){if(l=_.head(e.evaluate(r.field)),l instanceof Q)throw new Error("Could not encode size. Vector ["+l.label+"] is a Factor.");return u=new oe(l.domain.min,l.domain.max),s=r.range?new oe(gr(r.range.min),gr(r.range.max)):r.range=new oe(.05,1),c=ni(u,s),o=l.at,a=function(n){return i*c(o(n))},new t(l.label,a,u,s,null)}return new N(i*gr(r.value))}},to=uo(De,he),oo=uo($e,he),Hi=uo(Le,he),ji=function(n,t){var e,r,i,o,u,a;if(t instanceof De){if(a=_.head(n.evaluate(t.field)),a instanceof Q)throw new Error("Could not encode size. Vector ["+a.label+"] is a Factor.");return r=new oe(a.domain.min,a.domain.max),o=t.range?new oe(da(t.range.min),da(t.range.max)):t.range=new oe(da(yi),da(30)),u=ni(r,o),e=a.at,i=function(n){return u(e(n))},new he(a.label,i,a,r,o,null)}return new N(da(t.value))},Gi=function(n,t){var e,r,i,o,u,a;if(t instanceof Be){if(a=_.head(n.evaluate(t.field)),a instanceof Q)throw new Error("Could not encode lineWidth. Vector ["+a.label+"] is a Factor.");return r=new oe(a.domain.min,a.domain.max),o=t.range?new oe(t.range.min,t.range.max):t.range=new oe(1.5,15),u=ni(r,o),e=a.at,i=function(n){return u(e(n))},new he(a.label,i,a,r,o,null)}return new N(t.value)},no=function(n,t){var e,r,i,o;if(t instanceof Ve){if(o=_.head(n.evaluate(t.field)),!(o instanceof Q))throw new Error("Could not encode shape. Vector ["+o.label+"] is not a Factor.");return t.range||(t.range=new h(Fo(o.domain.length))),i=Fr(o.domain,t.range),e=o.at,r=function(n){return ce[i(e(n))]},new ae(o.label,r,o,o.domain,t.range,null)}return new N(ce[t.value]||ce.circle)},io=function(n,t){var e,r;return t?(r=function(){var r,i,o,u;for(o=t.fields,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(_.head(n.evaluate(e)));return u}(),new Ie(r)):void 0},So=function(n,t){return[null!=n?n:new W(chroma(_.head(C.c10))),null!=t?t:new T(1)]},No=function(n,t,e){return[null!=n?n:new z(chroma(_.head(C.c10))),null!=t?t:new I(1),null!=e?e:new E(1.5)]},qo=function(n,t,e,r,i,o,u){var a,s,c,l;return a=n||t,s=e||r||i,a||s||(o&&(a=!0),u&&(s=!0)),a&&(c=So(n,t),n=c[0],t=c[1]),s&&(l=No(e,r,i),e=l[0],r=l[1],i=l[2]),[n,t,e,r,i]},Di=function(n,t){var e,r;return t.fillColor||t.fillOpacity?[e=Bi(n,t.fillColor),r=Ui(n,t.fillOpacity),ro(e,r)]:[]},eo=function(n,t){var e,r;return t.strokeColor||t.strokeOpacity||t.lineWidth?[e=Bi(n,t.strokeColor),r=Ui(n,t.strokeOpacity),ro(e,r),Gi(n,t.lineWidth)]:[]},wr=function(n,t,e,r,i){return n.beginPath(),n.rect(t,e,r,i),n.clip()},Ti=function(n,t,e){return n.lineWidth=e,n.strokeStyle=t,n.stroke()},xi=function(n,t){return n.fillStyle=t,n.fill()},Ci=function(n,t,e,r,i){return n.beginPath(),n.moveTo(t,e),n.lineTo(r,i),n.stroke()},qi=function(n,t,e,r,i){return n.beginPath(),r>e?n.rect(t-i/2,e,i,r-e):n.rect(t-i/2,r,i,e-r),n.closePath()},Si=function(n,t,e,r,i){return n.beginPath(),e>t?n.rect(t,r-i/2,e-t,i):n.rect(e,r-i/2,t-e,i),n.closePath()},Ni=function(n,t,e,r,i,o,u,a,s,c){var l,f;return void 0!==t&&void 0!==e&&void 0!==r&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==s&&void 0!==c?(n.strokeStyle=s,n.lineWidth=c,Si(n,e,i,u,a),n.stroke(),l=a/2,f=a/4,Ci(n,r,u-l,r,u+l),Ci(n,e,u,t,u),Ci(n,i,u,o,u),Ci(n,t,u-f,t,u+f),Ci(n,o,u-f,o,u+f)):void 0},Wi=function(n,t,e,r,i,o,u,a,s,c){var l,f;return void 0!==t&&void 0!==e&&void 0!==r&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==s&&void 0!==c?(n.strokeStyle=s,n.lineWidth=c,qi(n,t,r,o,a),n.stroke(),l=a/2,f=a/4,Ci(n,t-l,i,t+l,i),Ci(n,t,r,t,e),Ci(n,t,o,t,u),Ci(n,t-f,e,t+f,e),Ci(n,t-f,u,t+f,u)):void 0},Qu=function(n,t,e,r){var i,o,u,a,s,c,l,f,h;u=n.slope,i=n.intercept,a=n.strokeColor,s=n.strokeOpacity,o=n.lineWidth,void 0!==i?0===u?e instanceof Ft&&(c=t.range.min,l=t.range.max,f=h=e.scale(i)):t instanceof Ft&&e instanceof Ft&&(c=t.scale(t.domain.min),l=t.scale(t.domain.max),f=e.scale(u*t.domain.min+i),h=e.scale(u*e.domain.max+i)):t instanceof Ft&&(c=l=t.scale(u),f=e.range.min,h=e.range.max),void 0!==c&&void 0!==f&&void 0!==l&&void 0!==h&&(r.save(),r.strokeStyle=kr(a,s),r.lineWidth=o,Ci(r,c,f,l,h),r.restore())},Zr=function(n){var t,e,r,i,o,u;return u=n.position.coordinates,r=u[0],t=u[1],i=n.strokeColor,o=n.strokeOpacity,e=n.lineWidth,new vt(r?r.value:0,t?t.value:void 0,i?i.value:chroma("red"),o?o.value:1,e?e.value:1.5)},ai=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p;return o=t[0],u=t[1],c=new pe([o],[u]),a=null!=(h=n.shape)?h:new Y("circle"),s=null!=(d=n.size)?d:new X(yi),p=qo(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!1,!0),e=p[0],r=p[1],l=p[2],f=p[3],i=p[4],new Mt(c,o,u,a,s,e,r,l,f,i,n.tooltip)},Ki=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;return s=Ji(e,t.positionX),c=Ji(r,t.positionY),l=no(n,t.shape),f=ji(n,t.size),g=Di(n,t),o=g[0],u=g[1],i=g[2],m=eo(n,t),d=m[0],p=m[1],h=m[2],a=m[3],v=io(n,t.tooltip),new Xt(s,c,l,f,i,o,u,h,d,p,a,v)},yo=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(u=t.positionX,a=t.positionY,s=t.shape,c=t.size,r=t.fill,l=t.stroke,o=t.lineWidth,e.save(),d=0,v=n.length;v>d;d++)i=n[d],f=u(i),h=a(i),void 0!==f&&void 0!==h&&(s(i)(e,f,h,c(i)),e.lineWidth=2+(l?o(i):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",p=0,g=n.length;g>p;p++)i=n[p],f=u(i),h=a(i),void 0!==f&&void 0!==h&&(s(i)(e,f,h,c(i)),l&&(e.lineWidth=o(i),e.stroke()),r&&e.fill());return e.restore()},zo=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v;for(a=t.positionX,s=t.positionY,c=t.shape,l=t.size,f=t.stroke,o=t.lineWidth,e.save(),p=0,v=n.length;v>p;p++)i=n[p],h=a(i),d=s(i),void 0!==h&&void 0!==d&&(u=r.put(i),c(i)(e,h,d,l(i)),e.fillStyle=u,e.fill(),f&&(e.lineWidth=o(i),e.strokeStyle=u,e.stroke()));return e.restore()},ta=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p;for(u=t.positionX,a=t.positionY,s=t.shape,c=t.size,r=t.fill,l=t.stroke,o=t.lineWidth,e.save(),d=0,p=n.length;p>d;d++)i=n[d],f=u(i),h=a(i),void 0!==f&&void 0!==h&&(s(i)(e,f,h,c(i)),l&&(e.lineWidth=o(i),e.strokeStyle=l(i),e.stroke()),r&&(e.fillStyle=r(i),e.fill()));return e.restore()},la=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d;for(a=t.positionX,s=t.positionY,c=[],h=0,d=n.length;d>h;h++)u=n[h],l=a(u),f=s(u),void 0!==l&&void 0!==f&&l>=e&&i>=l&&f>=r&&o>=f&&c.push(u);return c},pa=function(n){return _.map(n,function(n){return n.type}).join(", ")},ci=function(n,t){var e,r,i,o,a,s,c,l,f,h,d,p,v,g,m,w,y,_,k,x,C,S,q;switch(g=pa(t)){case"String, Number":return a=t[0],h=t[1],d=new pe([a],[h]),m=null!=(w=n.width)?w:new M(.8),y=qo(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=y[0],r=y[1],p=y[2],v=y[3],o=y[4],new b(d,a,void 0,h,m,e,r,p,v,o,n.tooltip);case"String, Number, Number":return a=t[0],f=t[1],h=t[2],d=new pe([a],[f,h]),m=null!=(_=n.width)?_:new M(.8),k=qo(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=k[0],r=k[1],p=k[2],v=k[3],o=k[4],new b(d,a,f,h,m,e,r,p,v,o,n.tooltip);case"Number, String":return c=t[0],l=t[1],d=new pe([c],[l]),i=null!=(x=n.height)?x:new O(.8),C=qo(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=C[0],r=C[1],p=C[2],v=C[3],o=C[4],new u(d,void 0,c,l,i,e,r,p,v,o,n.tooltip);case"Number, Number, String":return s=t[0],c=t[1],l=t[2],d=new pe([s,c],[l]),i=null!=(S=n.height)?S:new O(.8),q=qo(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=q[0],r=q[1],p=q[2],v=q[3],o=q[4],new u(d,s,c,l,i,e,r,p,v,o,n.tooltip);default:throw new Error("Cannot create rect marks with vectors of type ["+g+"]")}},Li=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,w;return s=Ji(e,t.positionX),c=t.positionY1?Ji(r,t.positionY1):Vi(r,0),l=Ji(r,t.positionY2),v=to(n,t.width,e.rect.width/e.domain.length),g=Di(n,t),o=g[0],u=g[1],i=g[2],w=eo(n,t),h=w[0],d=w[1],f=w[2],a=w[3],p=io(n,t.tooltip),new m(s,c,l,v,i,o,u,f,h,d,a,p)},Ri=function(n,t,e,r){var o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_,k;switch(t.space.x.length){case 1:w=t.space.x[0],l=Vi(e,0),f=Ji(e,w);break;default:y=t.space.x,m=y[0],w=y[1],l=Ji(e,m),f=Ji(e,w)}return b=t.space.y[0],h=Ji(r,b),s=to(n,t.height,r.rect.height/r.domain.length),_=Di(n,t),u=_[0],a=_[1],o=_[2],k=eo(n,t),p=k[0],v=k[1],d=k[2],c=k[3],g=io(n,t.tooltip),new i(l,f,h,s,o,u,a,d,p,v,c,g)},wo=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w;for(u=t.positionX,a=t.positionY1,s=t.positionY2,f=t.width,r=t.fill,c=t.stroke,o=t.lineWidth,e.save(),v=0,m=n.length;m>v;v++)i=n[v],h=u(i),d=a(i),p=s(i),l=f(i),void 0!==h&&void 0!==d&&void 0!==p&&void 0!==l&&(qi(e,h,d,p,l),e.lineWidth=2+(c?o(i):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",g=0,w=n.length;w>g;g++)i=n[g],h=u(i),d=a(i),p=s(i),l=f(i),void 0!==h&&void 0!==d&&void 0!==p&&void 0!==l&&(qi(e,h,d,p,l),c&&(e.lineWidth=o(i),e.stroke()),r&&e.fill());return e.restore()},mo=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w;for(s=t.positionX1,c=t.positionX2,l=t.positionY,o=t.height,r=t.fill,f=t.stroke,a=t.lineWidth,e.save(),v=0,m=n.length;m>v;v++)u=n[v],h=s(u),d=c(u),p=l(u),i=o(u),void 0!==h&&void 0!==d&&void 0!==p&&void 0!==i&&(Si(e,h,d,p,i),e.lineWidth=2+(f?a(u):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",g=0,w=n.length;w>g;g++)u=n[g],h=s(u),d=c(u),p=l(u),i=o(u),void 0!==h&&void 0!==d&&void 0!==p&&void 0!==i&&(Si(e,h,d,p,i),f&&(e.lineWidth=a(u),e.stroke()),r&&e.fill());return e.restore()},Yo=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;for(a=t.positionX,s=t.positionY1,c=t.positionY2,h=t.width,l=t.stroke,o=t.lineWidth,e.save(),g=0,m=n.length;m>g;g++)i=n[g],d=a(i),p=s(i),v=c(i),f=h(i),void 0!==d&&void 0!==p&&void 0!==v&&void 0!==f&&(u=r.put(i),qi(e,d,p,v,f),xi(e,u),l&&Ti(e,u,o(i)));return e.restore()},Eo=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;for(c=t.positionX1,l=t.positionX2,f=t.positionY,o=t.height,h=t.stroke,a=t.lineWidth,e.save(),g=0,m=n.length;m>g;g++)u=n[g],d=c(u),p=l(u),v=f(u),i=o(u),void 0!==d&&void 0!==p&&void 0!==v&&void 0!==i&&(s=r.put(u),Si(e,d,p,v,i),xi(e,s),h&&Ti(e,s,a(u)));return e.restore()},Gu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(u=t.positionX,a=t.positionY1,s=t.positionY2,f=t.width,r=t.fill,c=t.stroke,o=t.lineWidth,e.save(),v=0,g=n.length;g>v;v++)i=n[v],h=u(i),d=a(i),p=s(i),l=f(i),void 0!==h&&void 0!==d&&void 0!==p&&void 0!==l&&(qi(e,h,d,p,l),c&&Ti(e,c(i),o(i)),r&&xi(e,r(i)));return e.restore()},Hu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(s=t.positionX1,c=t.positionX2,l=t.positionY,o=t.height,r=t.fill,f=t.stroke,a=t.lineWidth,e.save(),v=0,g=n.length;g>v;v++)u=n[v],h=s(u),d=c(u),p=l(u),i=o(u),void 0!==h&&void 0!==d&&void 0!==p&&void 0!==i&&(Si(e,h,d,p,i),f&&Ti(e,f(u),a(u)),r&&xi(e,r(u)));return e.restore()},ca=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(a=t.positionX,s=t.positionY1,c=t.positionY2,h=t.width,l=[],b=0,y=n.length;y>b;b++)u=n[b],d=a(u),g=s(u),m=c(u),g>m&&(w=g,g=m,m=w),f=h(u),void 0!==d&&void 0!==g&&void 0!==m&&void 0!==f&&(p=d-f/2,v=d+f/2,e>v||p>i||r>m||g>o||l.push(u));return l},sa=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(c=t.positionX1,l=t.positionX2,f=t.positionY,a=t.height,h=[],b=0,y=n.length;y>b;b++)s=n[b],d=c(s),p=l(s),g=f(s),d>p&&(v=d,d=p,p=v),u=a(s),void 0!==d&&void 0!==p&&void 0!==g&&void 0!==u&&(m=g-u/2,w=g+u/2,e>p||d>i||r>w||m>o||h.push(s));return h},li=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b;switch(h=pa(t)){case"String, Number, Number, Number, Number, Number":return p=t[0],i=t[1],o=t[2],u=t[3],a=t[4],s=t[5],c=new pe([p],[i,o,u,a,s]),d=null!=(g=n.width)?g:new M(.8),m=No(n.strokeColor,n.strokeOpacity,n.lineWidth),l=m[0],f=m[1],r=m[2],new te(c,p,i,o,u,a,s,d,l,f,r,n.tooltip);case"Number, Number, Number, Number, Number, String":return i=t[0],o=t[1],u=t[2],a=t[3],s=t[4],v=t[5],c=new pe([i,o,u,a,s],[v]),e=null!=(w=n.height)?w:new M(.8),b=No(n.strokeColor,n.strokeOpacity,n.lineWidth),l=b[0],f=b[1],r=b[2],new Qt(c,i,o,u,a,s,v,e,l,f,r,n.tooltip)}},Qi=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g;return u=Ji(e,t.q0),a=Ji(e,t.q1),s=Ji(e,t.q2),c=Ji(e,t.q3),l=Ji(e,t.qn),v=Ji(r,t.positionY),i=to(n,t.height,r.rect.height/r.domain.length),g=eo(n,t),h=g[0],d=g[1],f=g[2],o=g[3],p=io(n,t.tooltip),new Kt(u,a,s,c,l,v,i,f,h,d,o,p)},_o=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(u=t.positionY,a=t.q0,s=t.q1,c=t.q2,l=t.q3,f=t.qn,r=t.height,h=t.stroke,o=t.lineWidth,e.save(),d=0,v=n.length;v>d;d++)i=n[d],Ni(e,a(i),s(i),c(i),l(i),f(i),u(i),r(i),h(i),2+(h?o(i):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",p=0,g=n.length;g>p;p++)i=n[p],Ni(e,a(i),s(i),c(i),l(i),f(i),u(i),r(i),h(i),o(i));return e.restore()},Io=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(c=t.positionY,l=t.q0,f=t.q1,h=t.q2,d=t.q3,p=t.qn,o=t.height,v=t.stroke,a=t.lineWidth,e.save(),b=0,y=n.length;y>b;b++)u=n[b],g=l(u),m=p(u),w=c(u),i=o(u),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==i&&(s=r.put(u),Si(e,g,m,w,i),xi(e,s),Ti(e,s,a(u)));return e.restore()},ra=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p;for(u=t.positionY,a=t.q0,s=t.q1,c=t.q2,l=t.q3,f=t.qn,r=t.height,h=t.stroke,o=t.lineWidth,e.save(),d=0,p=n.length;p>d;d++)i=n[d],Ni(e,a(i),s(i),c(i),l(i),f(i),u(i),r(i),h(i),o(i));return e.restore()},fa=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_,k,x,C,S;for(l=t.positionY,f=t.q0,h=t.q1,d=t.q2,p=t.q3,v=t.qn,a=t.height,m=t.stroke,c=t.lineWidth,g=[],C=0,S=n.length;S>C;C++)s=n[C],w=f(s),b=v(s),_=l(s),w>b&&(y=w,w=b,b=y),u=a(s),void 0!==w&&void 0!==b&&void 0!==_&&void 0!==u&&(k=_-u/2,x=_+u/2,e>b||w>i||r>x||k>o||g.push(s));return g},Zi=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g;return v=Ji(e,t.positionX),o=Ji(r,t.q0),u=Ji(r,t.q1),a=Ji(r,t.q2),s=Ji(r,t.q3),c=Ji(r,t.qn),p=to(n,t.width,e.rect.width/e.domain.length),g=eo(n,t),f=g[0],h=g[1],l=g[2],i=g[3],d=io(n,t.tooltip),new Zt(v,o,u,a,s,c,p,l,f,h,i,d)},ko=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(o=t.positionX,u=t.q0,a=t.q1,s=t.q2,c=t.q3,l=t.qn,h=t.width,f=t.stroke,i=t.lineWidth,e.save(),d=0,v=n.length;v>d;d++)r=n[d],Wi(e,o(r),u(r),a(r),s(r),c(r),l(r),h(r),f(r),2+(f?i(r):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",p=0,g=n.length;g>p;p++)r=n[p],Wi(e,o(r),u(r),a(r),s(r),c(r),l(r),h(r),f(r),i(r));return e.restore()},Mo=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(a=t.positionX,s=t.q0,c=t.q1,l=t.q2,f=t.q3,h=t.qn,v=t.width,d=t.stroke,o=t.lineWidth,e.save(),b=0,y=n.length;y>b;b++)i=n[b],g=a(i),m=s(i),w=h(i),p=v(i),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==p&&(u=r.put(i),qi(e,g,m,w,p),xi(e,u),Ti(e,u,o(i)));return e.restore()},ia=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p;for(o=t.positionX,u=t.q0,a=t.q1,s=t.q2,c=t.q3,l=t.qn,h=t.width,f=t.stroke,i=t.lineWidth,e.save(),d=0,p=n.length;p>d;d++)r=n[d],Wi(e,o(r),u(r),a(r),s(r),c(r),l(r),h(r),f(r),i(r));return e.restore()},ha=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_,k,x,C,S;for(s=t.positionX,c=t.q0,l=t.q1,f=t.q2,h=t.q3,d=t.qn,m=t.width,v=t.stroke,a=t.lineWidth,p=[],C=0,S=n.length;S>C;C++)u=n[C],w=s(u),_=c(u),k=d(u),_>k&&(x=_,_=k,k=x),g=m(u),void 0!==w&&void 0!==_&&void 0!==k&&void 0!==g&&(b=w-g/2,y=w+g/2,e>y||b>i||r>k||_>o||p.push(u));return p},ui=function(n,t){var e,r,i,o,u,a,s;return r=t[0],i=t[1],o=new pe([r],[i]),s=No(n.strokeColor,n.strokeOpacity,n.lineWidth),u=s[0],a=s[1],e=s[2],new Et(o,r,i,u,a,e,n.tooltip)},$i=function(n,t,e,r){var i,o,u,a,s,c,l,f;return o=Ji(e,t.positionX),u=Ji(r,t.positionY),f=eo(n,t),s=f[0],c=f[1],a=f[2],i=f[3],l=io(n,t.tooltip),new Wt(o,u,a,s,c,i,l)},bo=function(n,t,e){var r,i,o,u,a,s,c;for(i=t.positionX,o=t.positionY,e.save(),s=0,c=n.length;c>s;s++)r=n[s],u=i(r),a=o(r),e.lineWidth=1.5,e.strokeStyle="black",void 0!==u&&void 0!==a&&(Ei(e,u,a,64),e.stroke());return e.restore()},Xo=function(n,t,e,r){var i,o,u,a,s,c,l;for(o=t.positionX,u=t.positionY,e.save(),c=0,l=n.length;l>c;c++)i=n[c],a=o(i),s=u(i),void 0!==a&&void 0!==s&&(Ei(e,a,s,64),e.fillStyle=r.put(i),e.fill());return e.restore()},Zu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_;if(u=t.positionX,a=t.positionY,s=t.stroke,o=t.lineWidth,s instanceof N&&o instanceof N){for(e.strokeStyle=s(),e.lineWidth=o(),e.save(),w=!1,m=0,y=n.length;y>m;m++)i=n[m],f=u(i),p=a(i),void 0!==f&&void 0!==p?w?e.lineTo(f,p):(e.beginPath(),w=!0,e.moveTo(f,p)):(w&&e.stroke(),w=!1);return e.restore()}for(e.save(),e.lineCap="round",w=!1,h=void 0,v=void 0,c=void 0,b=0,_=n.length;_>b;b++)i=n[b],d=u(i),g=a(i),void 0!==d&&void 0!==g?(l=s(i),w&&(l!==c?(r=e.createLinearGradient(h,v,d,g),r.addColorStop(0,c||Me),r.addColorStop(1,l||Me),e.strokeStyle=r):e.strokeStyle=l,e.lineWidth=o(i),e.beginPath(),e.moveTo(h,v),e.lineTo(d,g),e.stroke()),w=!0,h=d,v=g,c=l):w=!1;return e.restore()},ei=_i([zt,Array,ai],[Tt,Array,ui],[Ht,Array,ci],[$t,Array,li]),Ir=_i([gt,Zr]),It=new ot(Ki,zo,yo,ta,la),Ot=new ot($i,Xo,bo,Zu,la),w=new ot(Li,Yo,wo,Gu,ca),o=new ot(Ri,Eo,mo,Hu,sa),Jt=new ot(Qi,Io,_o,ra,fa),ne=new ot(Zi,Mo,ko,ia,ha),Do=_i([Number,null,function(n){return new s(n,void 0)}],[null,Number,function(n,t){return new s(void 0,t)}],[Number,Number,function(n,t){return new s(n,t)}],[null,null,function(){return new s(void 0,void 0)}]),$o=_i([Number,Number,function(n,t){return new D(n,t)}]),Ko=_i([Number,Number,function(n,t){return new H(n,t)}]),tu=_i([it,_.identity],[Function,function(n){return new F(n)}]),zu=_i([Number,function(n){return new qt(n)}],[Boolean,function(n){return new a(n)}],[Date,function(n){return new j(n)}],[String,function(n){return new ge(n)}]),ku=_i([Array,function(n){return new h(n)}],[Number,function(n){return n>0?new oe(0,n):0>n?new oe(n,0):new V(-1,0,1)}],[String,function(n){return new ie(n,"black")}],[Number,Number,function(n,t){return t>=n?new oe(n,t):new oe(t,n)}],[String,String,function(n,t){return new ie(n,t)}],[Number,Number,Number,function(n,t,e){var r,i,o,u;return u=_.sortBy([n,t,e],_.identity),r=u[0],i=u[1],o=u[2],new V(r,i,o)}],[String,String,String,function(n,t,e){return new B(n,t,e)}]),_r=function(n){var t,e,r,i,o;for(o=[],r=0,i=n.length;i>r;r++)if(t=n[r],t instanceof nt)o.push(t);else{if(Oe!==(e=va(t)))throw new Error("Cannot create vector reference from ["+t+"] of type ["+e+"].");o.push(new nt(t))}return o},_u=function(){var n,t,e;return t=1<=arguments.length?Ca.call(arguments,0):[],new At(_.every(t,function(n){return n instanceof Ae})?function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(new q(n.value));return i}():function(){var n,r,i,o;for(i=_r(t),o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(new Pe(e));return o}())},Zo=_i([ge,function(n){return new W(chroma(n.value))}],[String,function(n){return new je(new nt(n))}],[nt,function(n){return new je(n)}],[String,S,function(n,t){return new je(new nt(n),t)}],[nt,S,function(n,t){return new je(n,t)}],[String,h,function(n,t){return new je(new nt(n),t)}],[nt,h,function(n,t){return new je(n,t)}]),nu=_i([qt,function(n){return new T(n.value)}],[String,function(n){return new Re(new nt(n))}],[nt,function(n){return new Re(n)}],[String,oe,function(n,t){return new Re(new nt(n),t)}],[nt,oe,function(n,t){return new Re(n,t)}]),Ou=_i([ge,function(n){return new z(chroma(n.value))}],[String,function(n){return new He(new nt(n))}],[nt,function(n){return new He(n)}],[String,S,function(n,t){return new He(new nt(n),t)}],[nt,S,function(n,t){return new He(n,t)}],[String,h,function(n,t){return new He(new nt(n),t)}],[nt,h,function(n,t){return new He(n,t)}]),Eu=_i([qt,function(n){return new I(n.value)}],[String,function(n){return new Ge(new nt(n))}],[nt,function(n){return new Ge(n)}],[String,oe,function(n,t){return new Ge(new nt(n),t)}],[nt,oe,function(n,t){return new Ge(n,t)}]),ki=function(n,t){return _i([qt,function(t){return new n(t.value)}],[String,function(n){return new t(new nt(n))}],[nt,function(n){return new t(n)}],[String,oe,function(n,e){return new t(new nt(n),e)}],[nt,oe,function(n,e){return new t(n,e)}])},Wu=ki(X,De),Mu=ki(M,$e),uu=ki(O,Le),hu=_i([qt,function(n){return new E(n.value)}],[String,function(n){return new Be(new nt(n))}],[nt,function(n){return new Be(n)}],[String,oe,function(n,t){return new Be(new nt(n),t)}],[nt,oe,function(n,t){return new Be(n,t)}]),Nu=_i([ge,function(n){return new Y(n.value)}],[String,function(n){return new Ve(new nt(n))}],[nt,function(n){return new Ve(n)}],[String,h,function(n,t){return new Ve(new nt(n),t)}],[nt,h,function(n,t){return new Ve(n,t)}]),Xu=function(){var n;return n=1<=arguments.length?Ca.call(arguments,0):[],new Ue(_r(n))},Su=function(){var n,t;return t=1<=arguments.length?Ca.call(arguments,0):[],1===t.length&&_.isNumber(n=_.head(t))?new Vt(n):new re(_r(t))},Ru=function(n){var t,e,r,i,o;for(o=[],e=0,r=n.length;r>e;e++)switch(t=n[e],t.type){case"string":o.push({label:t.name,type:"String",domain:null!=(i=t.lightningDomain)?i:[],parse:lr});break;case"integer":o.push({label:t.name,type:"Number",parse:fr});break;case"number":o.push({label:t.name,type:"Number",parse:hr});break;default:throw new Error("Invalid type ["+t.type+"] for schema field ["+t.name+"]")}return o},ju=function(n,t,e,r){var i,o,u,a,s,c,l,f;return a=Papa.parse(e,{skipEmptyLines:!0}),c=a.data,r&&c.shift(),f=function(){var n,r,a,f,h;for(h=[],u=n=0,a=t.length;a>n;u=++n){for(i=t[u],e=new Array(c.length),o=r=0,f=c.length;f>r;o=++r)s=c[o],void 0!==(l=i.parse(s[u]))&&(e[o]=l);switch(i.type){case"String":h.push(Ur(i.label,i.type,e,i.domain));break;case"Number":h.push(mi(i.label,i.type,e,_.identity));break;default:h.push(void 0)}}return h}(),Jr(n,f,_.range(c.length))},Ho=function(n,t,e,r,i){return function(o){var u,a,s,c,l,f;return l=Math.floor((e-t)/r),u=function(n){return t+n*r},s=function(n,t){var e;return e=function(n){return t(u(n))},Qr(n,n,"Number",l,e,_.identity)},f=function(){var n;n=[];for(c in i)a=i[c],n.push(s(c,a));return n}(),f.unshift(Qr(n,n,"Number",l,u,_.identity)),o(null,Jr("computed",f,_.range(l)))}},Uo=function(n){return function(t){return Oi("json",n+"/datapackage.json",function(e,r){var i,o;return e?t(e):(i=_.head(r.resources))?(o=i.path)?Oi("text",n+"/"+o,function(n,e){if(n)return t(n);try{return t(null,ju(r.name,Ru(i.schema),e,!0))}catch(o){return n=o,t(n)}}):t(new Error("Resource is missing attribute [path].")):t(new Error("No resources found in data package."))})}},Hr=function(){var n,t;return n=arguments[0],t=2<=arguments.length?Ca.call(arguments,1):[],function(){var e;return e=1<=arguments.length?Ca.call(arguments,0):[],sr(n,po(e,t))}},yu=Hr(zt,At,ue,fe,et,rt,we,be,mt,ze),xu=Hr(Ht,At,nr,lt,et,rt,we,be,mt,ze),bu=Hr(Tt,At,we,be,mt,ze),Cu=Hr($t,At,nr,lt,we,be,mt,ze),fu=Hr(gt,At,we,be,mt),wu=function(n,t){var e;return e=function(n,t){var r,i,o,u;if(_.isArray(n)){for(i=n.length,o=[];i--;)r=n[i],null!==r&&_.isObject(r)?(e(r,t),o.push(t(r))):o.push(void 0);return o}u=[];for(i in n)qa.call(n,i)&&(r=n[i],null!==r&&_.isObject(r)?(e(r,t),u.push(t(r))):u.push(void 0));return u},function(r){var i;return i=n.parse(r),e(i,function(n){var t;"CallExpression"===n.type&&"Identifier"===n.callee.type?_.isFunction(jo[t=n.callee.name])&&(n.callee={type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"plot"},property:{type:"Identifier",name:t}}):"Identifier"===n.type&&_.isFunction(jo[t=n.name])&&(delete n.name,n.type="MemberExpression",n.computed=!1,n.object={type:"Identifier",name:"plot"},n.property={type:"Identifier",name:t})}),t.generate(i)}},qu={maxCanvasSize:new le(795,600),visualizationSize:new le(300,300),axisLabelFont:"10px monospace",axisTickColor:"#4d4d4d",axisTitleFont:"bold 10px monospace",axisLabelColor:"#4d4d4d",gridLineColor:"#eee",originLineColor:"#ccc"},Au=function(n){return Math.round(n)+"px"},Lr=function(n,t){var e,r,i,o;e=document.createElement(n),i=e.style;for(r in t)o=t[r],i[r]=o;return e},Lu=function(n){for(var t;t=n.firstChild;)n.removeChild(t)},vi=function(n){var t,e;t=document.createElement("style"),t.type="text/css",t.innerHTML=n,e=_.head(document.getElementsByTagName("head")),e.appendChild(t)},gi=function(n){var t,e,r,i,o,u,a,s,c;return c=diecut("table","tbody","tr","th","td"),r=c[0],i=c[1],a=c[2],u=c[3],o=c[4],e=function(){var e;e=[];for(t in n)s=n[t],e.push(a([o(t+":"),u(s)]));return e}(),Ju(r(i(e)))},Pr=function(n){var t,e,r,i,o,u,a;return a=n.width,o=n.height,i=document.createElement("canvas"),e=i.getContext("2d"),r=window.devicePixelRatio||1,t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,u=r/t,i.style.position="absolute",r!==t?(i.width=a*u,i.height=o*u,e.scale(u,u),i.style.width=Au(a),i.style.height=Au(o)):(i.width=a,i.height=o),new l(i,e,n,u)},wi=function(n){var t,e,r,i,o,u,a,s,c,l,f,h;return h=function(){var t,e;for(e=[],a=t=1;5>=t;a=++t)e.push(Pr(n));return e}(),t=h[0],o=h[1],u=h[2],l=h[3],r=h[4],i=Lr("div",{position:"relative",overflow:"visible",width:Au(n.width),height:Au(n.height)}),i.className="lz",s=Lr("div",{position:"absolute",left:Au(0),top:Au(0),width:Au(0),height:Au(0),display:"none",outline:"1px dotted #999",background:"rgba(0, 0, 0, 0.05)"}),f=Lr("div",{position:"absolute",left:Au(0),top:Au(0),"max-width":Au(.9*n.width),display:"none"}),f.className="lz-tooltip",i.appendChild(t.element),i.appendChild(o.element),i.appendChild(s),i.appendChild(u.element),i.appendChild(f),c=ri(l),e=jr(r),new Je(n,i,t,o,u,l,r,s,f,c,e)},go=function(n){var t,e,r;return e=null!=(r=n.target)?r:n.srcElement,t=e.getBoundingClientRect(),[n.clientX-t.left,n.clientY-t.top]},vr=function(n,t,e,r,i){var o,u,a,s,c,l,f,h,d,p;u=$(document),o=$(n),s=t.style,c=h=l=d=f=p=0,a=!1,o.on("mousemove",function(n){var t;return c=n.offsetX,h=n.offsetY,(void 0===c||void 0===h)&&(t=go(n),c=t[0],h=t[1]),a?(s.left=Au(c>l?l:c),s.top=Au(h>d?d:h),s.width=Au(Math.abs(c-l)),s.height=Au(Math.abs(h-d))):e(c,h)}),o.on("mousedown",function(n){var t;return n.preventDefault(),l=n.offsetX,d=n.offsetY,(void 0===l||void 0===d)&&(t=go(n),l=t[0],d=t[1]),a=!0,s.display="block",s.left=Au(l),s.top=Au(d),u.on("mouseup",function(n){var t;return n.preventDefault(),f=n.offsetX,p=n.offsetY,(void 0===f||void 0===p)&&(t=go(n),f=t[0],p=t[1]),a=!1,s.display="none",s.width=Au(0),s.height=Au(0),u.off("mouseup"),Math.abs(l-f)>5||Math.abs(d-p)>5?r(l,d,f,p):i(l,d)})})},Dr=function(){var n,t,e,r;return r={},t=function(n,t){var e;return(e=r[n])?e.push(t):r[n]=[t]},e=function(n,t){var e,i,o,u,a;if(n)if(t){if(o=r[n])for(e=u=0,a=o.length;a>u;e=++u)if(i=o[e],i===t){o.splice(e,1);break}}else delete r[n]},n=function(){var n,t,e,i,o,u;if(t=arguments[0],n=2<=arguments.length?Ca.call(arguments,1):[],i=r[t])for(o=0,u=i.length;u>o;o++)e=i[o],e.apply(null,n)},[t,e,n]},bi=function(n,t,e,r,i,o,u){var a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O;return O=wi(n),a=O.baseCanvas,d=O.highlightCanvas,v=O.hoverCanvas,c=O.clipCanvas,w=O.maskCanvas,g=O.marquee,S=O.tooltip,m=O.mask,s=O.clip,q=n.regions.center,W=t.indices,N=void 0,C=function(t,r){var i,o,u,a,l;if(o=m.test(t,r),void 0!==o)for(i=c.context,i.clearRect(0,0,n.width,n.height),a=0,l=e.length;l>a;a++)if(u=e[a],i.save(),i.translate(q.left,q.top),u.mask([o],u.encoders,i,s),i.restore(),s.test(t,r))return o},l=function(n,t,e){var r;return r=gi(e),Lu(S),S.appendChild(r),S.style.display="block",b(n,t)},T=7,b=function(t,e){var r,i,o,u;if("none"!==S.style.display)return u=S.clientWidth,o=S.clientHeight,r=t+T,i=e-T-o,r+u>n.width&&(r=t-T-u),0>i&&(i=e+T),0>r&&(r=0),0>i&&(i=0),S.style.left=Au(r),S.style.top=Au(i)},f=function(){return S.style.display="none"},p=function(r,i){var o,a,s,c,h,d,p,g,m,w,y,_,k,x,S;if(c=C(r,i),c!==N){if(N=c,s=v.context,s.clearRect(0,0,n.width,n.height),f(),void 0!==c){for(s.save(),s.translate(q.left,q.top),g=0,y=e.length;y>g;g++)h=e[g],h.highlight([c],h.encoders,s);for(s.restore(),u("hover",new ft(t.vectors,c)),d={},m=0,_=e.length;_>m;m++){h=e[m],x=h.encodings;for(o in x)if(a=x[o])if(a instanceof Fe)(p=a.vector)&&(d[p.label]=p.format(c));else if(a instanceof Ie)for(S=a.vectors,w=0,k=S.length;k>w;w++)p=S[w],d[p.label]=p.format(c)}l(r,i,d)}}else b(r,i)},h=function(t){var r,i,o,u;if(r=d.context,r.clearRect(0,0,n.width,n.height),t.length){for(a.element.style.opacity=.5,r.save(),r.translate(q.left,q.top),o=0,u=e.length;u>o;o++)i=e[o],i.highlight(t,i.encoders,r),i.render(t,i.encoders,r);r.restore()}else a.element.style.opacity=1},k=function(n,e){var r;r=C(n,e),void 0!==r?(h([r]),u("select",new ee(t.vectors,[r]))):(h([]),u("deselect",new L(t.vectors)))},x=function(n,r,i,o){var a,s,c,l,f,d,p;f=-q.left+(n>i?i:n),l=-q.left+(n>i?n:i),p=-q.top+(r>o?o:r),d=-q.top+(r>o?r:o),c=function(){var n,t,r;for(r=[],n=0,t=e.length;t>n;n++)a=e[n],r.push(a.select(W,a.encoders,f,p,l,d));return r}(),s=e.length>1?_.unique(_.flatten(c,!0)):_.head(c),h(s),s.length?u("select",new ee(t.vectors,s)):u("deselect",new L(t.vectors))},y=function(){var t,u,s,c,l,f,h,d;for(u=a.context,c=w.context,$u(u,i,q),Ku(u,o,q),u.save(),u.translate(q.left,q.top),c.save(),c.translate(q.left,q.top),l=0,h=e.length;h>l;l++)s=e[l],s.render(W,s.encoders,u),s.mask(W,s.encoders,c,m);for(f=0,d=r.length;d>f;f++)t=r[f],t.render(t,i,o,u);c.restore(),u.restore(),Vu(u,i,n.regions.bottom),Du(u,o,n.regions.left)},vr(v.element,g,p,x,k),new Qe(O,t,C,h,p,k,x,y)},Bu=function(n,t,e,r,i){var o,u,a,s,c,l,h,d,p,v,g,m,w,b,y,_,k,x,C,S,q;if(n.font=qu.axisLabelFont,n.fillStyle=qu.axisLabelColor,n.strokeStyle=qu.axisTickColor,n.textBaseline="middle",_=ya+4,d=e-_,n.save(),wr(n,_,0,d,r),n.textAlign="right",y=e-5,l=e-6,t instanceof f){for(o=t.guide(),v=Math.floor(r/(ya+2)),a=Math.floor(o.length/v),s=k=0,C=o.length;C>k;s=++k)u=o[s],m=t.scale(u),b=-.5+Math.round(m),Ci(n,y,b,e,b),(0===a||0!==s&&0===s%a)&&n.fillText(u.value,l,m,d-6);Ci(n,e-.5,0,e-.5,r)}else{if(!(t instanceof Ft))throw new Error("Invalid axis type.");
for(g=6,p=r-6,q=t.guide(),x=0,S=q.length;S>x;x++)w=q[x],c=w.label,m=t.scale(w.value),b=Math.max(.5,-.5+Math.round(m)),Ci(n,y,b,e,b),h=g>m?g:m>p?p:m,n.fillText(c,l,h,d-6);Ci(n,e-.5,0,e-.5,r)}return n.restore(),n.font=qu.axisTitleFont,n.textAlign="center",n.translate(_/2,r/2),n.rotate(i*st),n.fillText(t.label,0,0,r),n.restore()},Uu=function(n,t,e,r){var i,o,u,a,s;if(n.strokeStyle=qu.gridLineColor,t instanceof f)Ci(n,0,.5,e,.5),Ci(n,0,r-.5,e,r-.5);else if(t instanceof Ft){for(s=t.guide(),u=0,a=s.length;a>u;u++)i=s[u],o=Math.max(.5,-.5+Math.round(t.scale(i.value))),Ci(n,0,o,e,o);t.domain.min<=0&&0<=t.domain.max&&(n.strokeStyle=qu.originLineColor,o=Math.max(.5,-.5+Math.round(t.scale(0))),Ci(n,0,o,e,o))}},$u=function(n,t,e){return n.save(),n.translate(e.left,e.top+e.height),n.rotate(-st),Uu(n,t,e.height,e.width),n.restore()},Ku=function(n,t,e){return n.save(),n.translate(e.left,e.top),Uu(n,t,e.width,e.height),n.restore()},Vu=function(n,t,e){return n.save(),n.translate(e.left,e.top+e.height),n.rotate(-st),Bu(n,t,e.height,e.width,1),n.restore()},Du=function(n,t,e){return n.save(),n.translate(e.left,e.top),Bu(n,t,e.width,e.height,-1),n.restore()},Ju=function(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.childNodes[0]},lo=function(n,t){var e,r,i,o,u,a,s;for(r={},i=[],a=0,s=t.length;s>a;a++)o=t[a],u=(e=n.at(o)).key,r[u]||(r[u]=!0,i.push(e));return i},di=function(n,t){var e,r,i,o,u,a;for(r=null,e=null,a=null,o=0,u=n.length;u>o;o++)if(i=n[o],null===r)switch(r=i.type){case Oe:a=i,e=lo(i,t);break;case Ne:e=i.domain;break;default:throw new Error("ni")}else{if(r!==i.type)throw new Error("Incompatible axis vector ["+i.label+"]. Expect type ["+r+"], got ["+i.type+"]");switch(r){case Oe:if(a!==i)throw new Error("Incompatible categorical vector ["+i.label+"]. Expected ["+a.label+"].");break;case Ne:e=xr(e,i.domain);break;default:throw new Error("ni")}}return new de(r,n,e)},Ar=function(n){var t,e;return t=function(){var t,r,i;for(i=[],t=0,r=n.length;r>t;t++)e=n[t],i.push(e.label);return i}(),_.unique(t).join(", ")},Cr=function(n,t){var e,r,i,o,u,a,c,l,h,d,p,v,g;if(c=new Dt(0,0,400,400),e=Mr(n,"",t,new oe(0,c.width),c),a=ya+4+6+10,e instanceof f){for(u=0,r=e.guide(),h=0,p=r.length;p>h;h++)i=r[h],u<(o=(""+i.value).length)&&(u=o);return new s(Math.ceil(u*ya+a),Math.ceil(r.length*(ya+8)))}if(e instanceof Ft){for(u=0,r=e.guide(),g=e.guide(),d=0,v=g.length;v>d;d++)l=g[d],u<(o=l.label.length)&&(u=o);return new s(Math.ceil(u*ya+a),qu.visualizationSize.height)}throw new Error("Invalid axis type.")},Mr=function(n,t,e,r,i){var o,u,a,s,c;switch(n){case Oe:return u=oi(e,r),o=function(){return e},new f(n,t,u,e,r,i,o);case Ne:return c=ii(e,r),u=c[0],a=c[1],s=c[2],o=function(n){var t,e,r,i,o,u;for(null==n&&(n=10),t=a(n),o=s(n),u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(new Xe(e,t(e)));return u},new wt(n,t,u,e,r,i,o);default:throw new Error("Unhandled axis type ["+n+"].")}},ua=function(n,t){var e,r;return r=si(t),e=Fu(n,r),ho(t,re)?oa(e,t):ho(t,Vt)?ea(e,t):na(e,t)},ea=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m;return u=ho(t,Vt),i=u.index,m=diecut("table.lz-record","tbody","tr","th","td"),s=m[0],c=m[1],h=m[2],f=m[3],l=m[4],d=function(){var t,e;t=n.schema,e=[];for(o in t)g=t[o],v=g.format(i),r=function(){switch(g.type){case Oe:return void 0!==v?_.escape(v):"-";case Ne:return void 0!==v?_.escape(v):"-";case We:return void 0!==v?v:"-";default:throw new Error("Cannot render table cell of type "+g.type)}}(),e.push(h([f(_.escape(g.label)),l(r)]));return e}(),e=Ju(s(c(d))),a=_.noop,p=_.noop,new Yt(e,a,p)},oa=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C;return o=ho(t,re),k=function(){var t,e,i,u;if(o.fields.length){for(i=o.fields,u=[],t=0,e=i.length;e>t;t++)r=i[t],u.push(n.evaluate(r));return u}return n.vectors}(),x=_.flatten(k),C=diecut("table.lz-table","thead","tbody","tr","th","th.lz-number","td","td.lz-number"),a=C[0],d=C[1],s=C[2],g=C[3],h=C[4],p=C[5],c=C[6],l=C[7],v=function(){var n,t,e;for(e=[],n=0,t=x.length;t>n;n++)switch(y=x[n],y.type){case Ne:e.push(p(_.escape(y.label)));break;default:e.push(h(_.escape(y.label)))}return e}(),m=function(){var t,e,r,o;for(r=n.indices,o=[],t=0,e=r.length;e>t;t++)i=r[t],f=function(){var n,t,e;for(e=[],n=0,t=x.length;t>n;n++)switch(y=x[n],b=y.format(i),y.type){case Oe:e.push(c(void 0!==b?_.escape(b):"-"));break;case Ne:e.push(l(void 0!==b?_.escape(b):"-"));break;case We:e.push(c(void 0!==b?b:"-"));break;default:throw new Error("Cannot render table cell of type "+y.type)}return e}(),o.push(g(f));return o}(),e=Ju(a([d(g(v)),s(m)])),u=_.noop,w=_.noop,new Yt(e,u,w)},Sr=function(n,t,e){return n.type===Ne?e?xr(n.domain,e):t.type===Oe?xo(n.domain):n.domain:n.domain},na=function(n,t){var r,i,o,u,a,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,z,I;return b=_.map(co(t,xt),function(t){var e,r;return r=function(){var r,i,o,u;for(o=t.position.coordinates,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(n.evaluate(e.field));return u}(),ei(t,_.flatten(r))}),q=_.map(b,function(n){return n.space}),T=vo(q,function(n){return n.x}),O=vo(q,function(n){return n.y}),C=di(T,n.indices),S=di(O,n.indices),g=Sr(C,S,ho(t,D)),m=Sr(S,C,ho(t,H)),i=Cr(C.type,g),o=Cr(S.type,m),h=null!=(Y=ho(t,s))?Y:new s(void 0,void 0),p=null!=(X=h.width)?X:Math.min(qu.maxCanvasSize.width,o.width+i.height),d=null!=(z=h.height)?z:Math.min(qu.maxCanvasSize.height,i.width+o.height),v=new c(p,d,new _t(Math.min(.3*qu.maxCanvasSize.width,o.width),0,0,Math.min(.3*qu.maxCanvasSize.height,i.width))),u=v.regions.bottom,a=v.regions.left,k=new oe(0,u.width),x=S.type===Ne?new oe(a.height,0):new oe(0,a.height),l=Mr(C.type,Ar(T),g,k,u),f=Mr(S.type,Ar(O),m,x,a),w=_.map(b,function(t){var e,r,i,o,u;i=t.geometry,r=i.encode(n,t,l,f),e={};for(o in r)u=r[o],(null!=u?u.encode:void 0)&&(e[o]=u.encode);return new ht(r,e,i.mask,i.highlight,i.render,i.select)}),r=_.map(co(t,e),function(n){return Ir(n)}),I=Dr(),N=I[0],W=I[1],y=I[2],E=bi(v,n,w,r,l,f,y),E.render(),new Yt(E.viewport.container,N,W)},ga=_i([F,Array,Function,function(n,t,e){return n.read(function(n,r){return n?e(n):ga(r,t,e)})}],[it,Array,Function,function(n,t,e){var r;try{return e(null,ua(n,t))}catch(i){return r=i,e(r)}}]),Oo=function(){return vi(".lz-tooltip {\n  background: #2c2c2c;\n  color: #fff;\n  font-size: 12px;\n}\n.lz-tooltip th, .lz-tooltip td {\n  padding: 0px 4px;\n  vertical-align: middle;\n}\n.lz-tooltip th {\n  text-align: left;\n}\n.lz-table > tbody > tr:hover {\n  outline: 1px solid black;\n  cursor: pointer;\n}\n.lz-table th, .lz-table td {\n  padding: 0px 8px;\n  vertical-align: middle;\n}\n.lz-table tbody > tr:nth-child(odd) {\n  background-color: #f3f3f3;\n}\n.lz-table .lz-number {\n  text-align: right;\n}\n.lz-record th, .lz-record td {\n  padding: 0px 8px;\n  vertical-align: middle;\n}\n.lz-record th {\n  text-align: right;\n}\n.lz-record tbody > tr:nth-child(odd) {\n  background-color: #f3f3f3;\n}")},ka=null,ya=18,To=function(){var n,t;return ka=n=Pr(new s(100,100)),t=n.context,t.font=qu.axisLabelFont,ya=t.measureText("M").width},_a=!1,Wo=function(){return _a?void 0:(Oo(),To(),_a=!0)},jo=function(){var n,t;return t=1<=arguments.length?Ca.call(arguments,0):[],(n=ho(t,F,it))?(Wo(),function(e){var r;return r=_.isElement(e)?function(n,t){return n?e.innerHTML=n.message:e.appendChild(t.element)}:_.isFunction(e)?e:void 0,r?ga(n,_.without(t,n),r):void 0}):function(){var n;return n=1<=arguments.length?Ca.call(arguments,0):[],jo.apply(null,t.concat(n))}},jo.VERSION="0.1.14",jo.settings=qu,jo.bounds=Do,jo.from=tu,jo.value=zu,jo.range=ku,jo.position=_u,jo.fillColor=Zo,jo.fillOpacity=nu,jo.strokeColor=Ou,jo.strokeOpacity=Eu,jo.size=Wu,jo.width=Mu,jo.height=uu,jo.lineWidth=hu,jo.shape=Nu,jo.tooltip=Xu,jo.factor=Qo,jo.stack=Tu,jo.groupBy=ru,jo.where=Iu,jo.limit=lu,jo.having=ou,jo.eq=Jo,jo.ne=gu,jo.lt=du,jo.gt=iu,jo.le=su,jo.ge=eu,jo.like=cu,jo.avg=Vo,jo.count=Go,jo.max=pu,jo.min=vu,jo.sum=Yu,jo.parse=wu,jo.point=yu,jo.rect=xu,jo.path=bu,jo.schema=Cu,jo.line=fu,jo.select=Su,jo.dataPackage=Uo,jo.computed=Ho,jo.createFrame=Jr,jo.createVector=mi,jo.createList=ti,jo.createFactor=Ur,jo.domainX_HACK=$o,jo.domainY_HACK=Ko,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=jo:window.plot=jo}).call(this);
