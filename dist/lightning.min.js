(function(){var n,t,e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,I,M,z,A,P,F,j,L,R,B,V,D,H,G,U,K,J,Q,Z,nn,tn,en,rn,on,un,an,sn,cn,ln,fn,hn,dn,pn,vn,gn,mn,wn,bn,yn,_n,kn,xn,Cn,Sn,qn,Nn,Wn,Tn,On,En,Yn,Xn,In,Mn,zn,An,Pn,Fn,jn,Ln,Rn,Bn,Vn,Dn,Hn,$n,Gn,Un,Kn,Jn,Qn,Zn,nt,tt,et,rt,it,ot,ut,at,st,ct,lt,ft,ht,dt,pt,vt,gt,mt,wt,bt,yt,_t,kt,xt,Ct,St,qt,Nt,Wt,Tt,Ot,Et,Yt,Xt,It,Mt,zt,At,Pt,Ft,jt,Lt,Rt,Bt,Vt,Dt,Ht,$t,Gt,Ut,Kt,Jt,Qt,Zt,ne,te,ee,re,ie,oe,ue,ae,se,ce,le,fe,he,de,pe,ve,ge,me,we,be,ye,_e,ke,xe,Ce,Se,qe,Ne,We,Te,Oe,Ee,Ye,Xe,Ie,Me,ze,Ae,Pe,Fe,je,Le,Re,Be,Ve,De,He,$e,Ge,Ue,Ke,Je,Qe,Ze,nr,tr,er,rr,ir,or,ur,ar,sr,cr,lr,fr,hr,dr,pr,vr,gr,mr,wr,br,yr,_r,kr,xr,Cr,Sr,qr,Nr,Wr,Tr,Or,Er,Yr,Xr,Ir,Mr,zr,Ar,Pr,Fr,jr,Lr,Rr,Br,Vr,Dr,Hr,$r,Gr,Ur,Kr,Jr,Qr,Zr,ni,ti,ei,ri,ii,oi,ui,ai,si,ci,li,fi,hi,di,pi,vi,gi,mi,wi,bi,yi,_i,ki,xi,Ci,Si,qi,Ni,Wi,Ti,Oi,Ei,Yi,Xi,Ii,Mi,zi,Ai,Pi,Fi,ji,Li,Ri,Bi,Vi,Di,Hi,$i,Gi,Ui,Ki,Ji,Qi,Zi,no,to,eo,ro,io,oo,uo,ao,so,co,lo,fo,ho,po,vo,go,mo,wo,bo,yo,_o,ko,xo,Co,So,qo,No,Wo,To,Oo,Eo,Yo,Xo,Io,Mo,zo,Ao,Po,Fo,jo,Lo,Ro,Bo,Vo,Do,Ho,$o,Go,Uo,Ko,Jo,Qo,Zo,nu,tu,eu,ru,iu,ou,uu,au,su,cu,lu,fu,hu,du,pu,vu,gu,mu,wu,bu,yu,_u,ku,xu,Cu,Su,qu,Nu,Wu,Tu,Ou=[].slice,Eu=function(n,t){function e(){this.constructor=n}for(var r in t)Yu.call(t,r)&&(n[r]=t[r]);return e.prototype=t.prototype,n.prototype=new e,n.__super__=t.prototype,n},Yu={}.hasOwnProperty;Wu=Math.PI,Tu=2*Wu,fn=Wu/2,Nu=1e-6,Q=Nu*Nu,$n=Wu/180,B=180/Wu,Pt=Math.tan(30*$n),_t=Math.sqrt(3),C=16581375,Rt="transparent",On="&middot;",At="undefined",Yt="null",Wt="Boolean",zt="String",Xt="Number",Et="Function",It="Object",Nt="Array",qt="Arguments",Tt="Date",Mt="RegExp",Ot="Error",Su=function(n){var t;if(t=Object.prototype.toString.call(n),null===n)return Yt;if(void 0===n)return At;if(n===!0||n===!1||"[object Boolean]"===t)return Wt;switch(t){case"[object String]":return zt;case"[object Number]":return Xt;case"[object Function]":return Et;case"[object Object]":return It;case"[object Array]":return Nt;case"[object Arguments]":return qt;case"[object Date]":return Tt;case"[object RegExp]":return Mt;case"[object Error]":return Ot;default:return t}},Tn=function(){function n(n,t){this.match=n,this.func=t}return n}(),Er=function(){var n,t;return n=function(t){var e,r,i;switch(r=Su(t)){case At:return function(n){return void 0===n};case Yt:return function(n){return null===n};case Wt:return function(n){return t===Boolean||n===t};case zt:return function(n){return t===String||n===t};case Xt:return function(n){return t===Number||n===t||_.isNaN(n)&&_.isNaN(t)};case Mt:return function(){return t===RegExp};case Error:return function(){return t===Error};case Tt:return function(n){return t===Date||n===t};case Nt:return 1===t.length&&Et===(i=Su(t[0]))?(e=n(t[0]),function(n){var t,r,i;if(Nt!==Su(n))return!1;for(t=0,r=n.length;r>t;t++)if(i=n[t],!e(i))return!1;return!0}):function(n){return t===Array||be(t,n)};case Et:return function(n){var e;return n instanceof t?!0:n&&n.constructor===t?!0:(e=Su(n),t===Boolean&&e===Wt||t===String&&e===zt||t===Number&&e===Xt)};case It:return function(n){var e,r;for(e in t)if(r=t[e],n[e]!==r)return!1;return!0};default:return function(){return!1}}},t=function(t){var e;return e=_.map(t,n),function(n){var t,r,i,o;if(0===n.length)return!1;if(n.length!==e.length)return!1;for(r=i=0,o=e.length;o>i;r=++i)if(t=e[r],!t(n[r]))return!1;return!0}},function(){var n,e;return n=1<=arguments.length?Ou.call(arguments,0):[],e=_.map(n,function(n){var e,r,i;return i=2<=n.length?Ou.call(n,0,r=n.length-1):(r=0,[]),e=n[r++],new Tn(t(i),e)}),function(){var n,t,r,i;for(n=1<=arguments.length?Ou.call(arguments,0):[],t=0,r=e.length;r>t;t++)if(i=e[t],i.match(n))return i.func.apply(null,n);throw new Error("Pattern match failure for args [ "+_.map(n,function(n){return""+n+":"+Su(n)}).join(", ")+" ]")}}}(),we=function(n,t){return new(n.bind.apply(n,[null].concat(t)))},m=function(){function n(n,t){this.put=n,this.test=t}return n}(),Wn=function(){function n(n,t){this.put=n,this.test=t}return n}(),gt=function(){function n(n,t){this.width=n,this.height=t}return n}(),Kn=function(){function n(n,t,e,r){this.left=n,this.top=t,this.width=e,this.height=r}return n}(),ee=function(){function n(n,t,e,r,i,o,u){this.name=n,this.label=t,this.type=e,this.at=r,this.count=i,this.domain=o,this.format=u}return n}(),nn=function(n){function t(n,e,r,i,o,u,a,s){this.valueAt=o,t.__super__.constructor.call(this,n,e,r,i,u,a,s)}return Eu(t,n),t}(ee),xn=function(n){function t(n,e,r,i,o,u){t.__super__.constructor.call(this,n,e,It,r,i,o,u)}return Eu(t,n),t}(ee),cn=function(){function n(){}return n}(),an=function(){function n(n,t,e,r,i,o,u,a,s){this.label=n,this.vectors=t,this.schema=e,this.indices=r,this.cube=i,this.at=o,this.evaluate=u,this.attach=a,this.metadata=s}return n}(),Bt=function(){function n(n){this.value=n}return n}(),En=function(n){function t(n){t.__super__.constructor.call(this,n)}return Eu(t,n),t}(Bt),kt=function(n){function t(n){t.__super__.constructor.call(this,n)}return Eu(t,n),t}(Bt),R=function(n){function t(n){t.__super__.constructor.call(this,n)}return Eu(t,n),t}(Bt),a=function(n){function t(n){t.__super__.constructor.call(this,n)}return Eu(t,n),t}(Bt),en=function(){function n(n){this.name=n}return n}(),Cn=function(n){function t(n){this.evaluate=n}return Eu(t,n),t}(en),Qn=function(n){function t(n){this.evaluate=n}return Eu(t,n),t}(en),rn=function(){function n(n,t){this.color=n,this.opacity=t}return n}(),xt=function(){function n(n,t,e){this.color=n,this.opacity=t,this.size=e}return n}(),ct=function(){function n(n){this.fields=n}return n}(),Un=function(){function n(n){this.index=n}return n}(),Nn=function(){function n(){}return n}(),Fn=function(n){function t(n,t,e,r,i,o,u,a,s){this.position=n,this.shape=t,this.size=e,this.fillColor=r,this.fillOpacity=i,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=s}return Eu(t,n),t}(Nn),In=function(n){function t(n,t,e,r,i){this.position=n,this.strokeColor=t,this.strokeOpacity=e,this.lineWidth=r,this.tooltip=i}return Eu(t,n),t}(Nn),tt=function(n){function t(n,t,e,r,i){this.position=n,this.strokeColor=t,this.strokeOpacity=e,this.lineWidth=r,this.tooltip=i}return Eu(t,n),t}(Nn),Jn=function(n){function t(n,t,e,r,i,o,u,a,s){this.position=n,this.width=t,this.height=e,this.fillColor=r,this.fillOpacity=i,this.strokeColor=o,this.strokeOpacity=u,this.lineWidth=a,this.tooltip=s}return Eu(t,n),t}(Nn),e=function(){function n(){}return n}(),yn=function(n){function t(n,t,e,r){this.position=n,this.strokeColor=t,this.strokeOpacity=e,this.lineWidth=r}return Eu(t,n),t}(e),t=function(){function n(){}return n}(),bn=function(n){function t(n,t,e,r,i){this.slope=n,this.intercept=t,this.strokeColor=e,this.strokeOpacity=r,this.lineWidth=i,this.render=su}return Eu(t,n),t}(t),qn=function(){function n(){}return n}(),Ln=function(n){function t(n,t,e,r,i,o,u,a,s,c,l){this.space=n,this.positionX=t,this.positionY=e,this.shape=r,this.size=i,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=s,this.lineWidth=c,this.tooltip=l,this.geometry=jn}return Eu(t,n),t}(qn),it=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.space=n,this.q0=t,this.q1=e,this.q2=r,this.q3=i,this.qn=o,this.positionY=u,this.height=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f,this.geometry=rt}return Eu(t,n),t}(qn),at=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.space=n,this.positionX=t,this.q0=e,this.q1=r,this.q2=i,this.q3=o,this.qn=u,this.width=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f,this.geometry=ut}return Eu(t,n),t}(qn),y=function(n){function t(n,t,e,r,i,o,u,a,s,c,l){this.space=n,this.positionX=t,this.positionY1=e,this.positionY2=r,this.width=i,this.fillColor=o,this.fillOpacity=u,this.strokeColor=a,this.strokeOpacity=s,this.lineWidth=c,this.tooltip=l,this.geometry=b}return Eu(t,n),t}(qn),u=function(n){function t(n,t,e,r,i,u,a,s,c,l,f){this.space=n,this.positionX1=t,this.positionX2=e,this.positionY=r,this.height=i,this.fillColor=u,this.fillOpacity=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f,this.geometry=o}return Eu(t,n),t}(qn),zn=function(n){function t(n,t,e,r,i,o,u){this.space=n,this.positionX=t,this.positionY=e,this.strokeColor=r,this.strokeOpacity=i,this.lineWidth=o,this.tooltip=u,this.geometry=Mn}return Eu(t,n),t}(qn),J=function(){function n(){}return n}(),Pn=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX=n,this.positionY=t,this.shape=e,this.size=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Eu(t,n),t}(J),et=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.q0=n,this.q1=t,this.q2=e,this.q3=r,this.qn=i,this.positionY=o,this.height=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Eu(t,n),t}(J),ot=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX=n,this.q0=t,this.q1=e,this.q2=r,this.q3=i,this.qn=o,this.width=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Eu(t,n),t}(J),w=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX=n,this.positionY1=t,this.positionY2=e,this.width=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Eu(t,n),t}(J),i=function(n){function t(n,t,e,r,i,o,u,a,s,c,l,f){this.positionX1=n,this.positionX2=t,this.positionY=e,this.height=r,this.fill=i,this.fillColor=o,this.fillOpacity=u,this.stroke=a,this.strokeColor=s,this.strokeOpacity=c,this.lineWidth=l,this.tooltip=f}return Eu(t,n),t}(J),Xn=function(n){function t(n,t,e,r,i,o,u){this.positionX=n,this.positionY=t,this.stroke=e,this.strokeColor=r,this.strokeOpacity=i,this.lineWidth=o,this.tooltip=u}return Eu(t,n),t}(J),yt=function(){function n(n,t){this.x=n,this.y=t}return n}(),bt=function(){function n(n,t,e){this.type=n,this.vectors=t,this.domain=e}return n}(),r=function(){function n(){}return n}(),f=function(n){function t(n,t,e,r,i,o,u){this.type=n,this.label=t,this.scale=e,this.domain=r,this.range=i,this.rect=o,this.guide=u}return Eu(t,n),t}(r),Vn=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(r),kn=function(n){function t(n,t,e,r,i,o,u){this.type=n,this.label=t,this.scale=e,this.domain=r,this.range=i,this.rect=o,this.guide=u}return Eu(t,n),t}(Vn),Ft=function(){function n(n,t){this.value=n,this.label=t}return n}(),K=function(){function n(n,t){this.label=n,this.encode=t}return n}(),T=function(n){function t(n){this.value=n,t.__super__.constructor.call(this,"Constant",me(this.value))}return Eu(t,n),t}(K),Dt=function(n){function t(n,e,r){this.vector=r,t.__super__.constructor.call(this,n,e)}return Eu(t,n),t}(K),Lt=function(n){function t(n){this.vectors=n,t.__super__.constructor.call(this,"tooltips")}return Eu(t,n),t}(K),Bn=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Eu(t,n),t}(Dt),x=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Eu(t,n),t}(Dt),Yn=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Eu(t,n),t}(Dt),wt=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Eu(t,n),t}(Dt),dt=function(n){function t(n,e,r,i,o,u){this.domain=i,this.range=o,this.guide=u,t.__super__.constructor.call(this,n,e,r)}return Eu(t,n),t}(Dt),g=function(){function n(){}return n}(),k=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),F=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),Rn=function(n){function t(n){this.coordinates=n}return Eu(t,n),t}(g),on=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),un=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),Ct=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),St=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),mt=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),ue=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),pn=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),_n=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),ht=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),jt=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(g),W=function(n){function t(n){this.value=n}return Eu(t,n),t}(F),Vt=function(n){function t(n){this.field=n}return Eu(t,n),t}(F),O=function(n){function t(n){this.value=n}return Eu(t,n),t}(on),Ht=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(on),E=function(n){function t(n){this.value=n}return Eu(t,n),t}(un),$t=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(un),z=function(n){function t(n){this.value=n}return Eu(t,n),t}(Ct),Qt=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(Ct),A=function(n){function t(n){this.value=n}return Eu(t,n),t}(St),Zt=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(St),M=function(n){function t(n){this.value=n}return Eu(t,n),t}(mt),Jt=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(mt),P=function(n){function t(n){this.value=n}return Eu(t,n),t}(ue),te=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(ue),Y=function(n){function t(n){this.value=n}return Eu(t,n),t}(pn),Gt=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(pn),X=function(n){function t(n){this.value=n}return Eu(t,n),t}(_n),Ut=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(_n),I=function(n){function t(n){this.value=n}return Eu(t,n),t}(ht),Kt=function(n){function t(n,t){this.field=n,this.range=t}return Eu(t,n),t}(ht),ne=function(n){function t(n){this.fields=n}return Eu(t,n),t}(jt),Z=function(){function n(n,t){this.min=n,this.max=t}return n}(),G=function(){function n(n,t){this.min=n,this.max=t}return n}(),U=function(){function n(n,t){this.min=n,this.max=t}return n}(),Gn=function(){function n(){}return n}(),h=function(n){function t(n){this.values=n}return Eu(t,n),t}(Gn),Dn=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(Gn),ft=function(n){function t(n,t){this.min=n,this.max=t}return Eu(t,n),t}(Dn),H=function(n){function t(n,t,e){this.min=n,this.mid=t,this.max=e}return Eu(t,n),t}(Dn),q=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Eu(t,n),t}(Gn),lt=function(n){function t(n,t){this.min=n,this.max=t}return Eu(t,n),t}(q),D=function(n){function t(n,t,e){this.min=n,this.mid=t,this.max=e}return Eu(t,n),t}(q),sn=function(){function n(n,t,e,r,i){this.encode=n,this.mask=t,this.highlight=e,this.render=r,this.select=i}return n}(),L=function(){function n(n){this.read=n}return n}(),l=function(){function n(n,t,e,r){this.element=n,this.context=t,this.bounds=e,this.ratio=r}return n}(),re=function(){function n(n,t,e,r,i,o,u,a,s,c,l){this.box=n,this.container=t,this.baseCanvas=e,this.highlightCanvas=r,this.hoverCanvas=i,this.maskCanvas=o,this.clipCanvas=u,this.marquee=a,this.tooltip=s,this.mask=c,this.clip=l}return n}(),gn=function(){function n(n,t,e,r,i,o){this.encodings=n,this.encoders=t,this.mask=e,this.highlight=r,this.render=i,this.select=o}return n}(),ie=function(){function n(n,t,e,r,i,o,u,a){this.viewport=n,this.frame=t,this.test=e,this.highlight=r,this.hover=i,this.selectAt=o,this.selectWithin=u,this.render=a}return n}(),An=function(){function n(n,t,e,r){this.element=n,this.subscribe=t,this.unsubscribe=e,this.highlight=r}return n}(),s=function(){function n(n,t){this.width=n,this.height=t}return n}(),Zn=function(){function n(n,t,e,r,i){this.center=n,this.left=t,this.top=e,this.right=r,this.bottom=i}return n}(),Sn=function(){function n(n,t,e,r){this.left=n,this.top=t,this.right=e,this.bottom=r}return n}(),c=function(){function n(n,t,e){var r;this.width=n,this.height=t,this.margin=e,this.regions=new Zn(r=new Kn(e.left,e.top,n-e.left-e.right,t-e.top-e.bottom),new Kn(0,e.top,e.left,r.height),new Kn(e.left+r.width,e.top,e.right,r.height),new Kn(e.left,0,r.width,e.top),new Kn(e.left,e.top+r.height,r.width,e.bottom))}return n}(),Hn=function(){function n(n,t,e,r){this.where=n,this.limit=t,this.group=e,this.having=r}return n}(),d=function(){function n(n,t){this.key=n,this.value=t}return n}(),n=new d(0,"All"),j=function(){function n(n,t,e,r){this.frame=n,this.hierarchy=t,this.cells=e,this.dimension=r}return n}(),mn=function(){function n(n,t,e){this.category=n,this.indices=t,this.children=e}return n}(),p=function(){function n(n,t){this.levels=n,this.indices=t}return n}(),tn=function(){function n(n,t,e,r,i){this.at=n,this.valueAt=t,this.count=e,this.domain=r,this.format=i}return n}(),ln=function(){function n(n){this.fields=n}return n}(),oe=function(){function n(n,t){this.fields=n,this.predicate=t}return n}(),wn=function(){function n(n,t){this.offset=n,this.length=t}return n}(),hn=function(){function n(n,t){this.fields=n,this.predicate=t}return n}(),vn=function(){function n(n,t){this.frame=n,this.index=t}return n}(),st=function(){function n(n,t){this.frame=n,this.indices=t}return n}(),V=function(){function n(n){this.frame=n}return n}(),N=function(){function n(n){this.vector=n}return n}(),dn=function(){function n(n){this.vector=n}return n}(),nt=function(){function n(n){this.index=n}return n}(),v=function(){function n(n,t){this.vector=n,this.index=t}return n}(),ke=function(n){var t;return t=parseFloat(n),_.isNaN(t)?void 0:t},_e=function(n){var t;return t=parseInt(n,10),_.isNaN(t)?void 0:t},ye=function(n){return null!=n?n:void 0},xu=function(n){return n*n},Ne=function(n,t){return function(e){return n>e?n:e>t?t:e}},qe=Ne(0,1),Or=8,Le=function(n){return n.slice(0)},Ci=function(n,t){var e,r,i,o,u,a,s,c;for(c=[],e=0,r=n.length;r>e;e++)for(a=n[e],u=t(a),o=0,i=u.length;i>o;o++)s=u[o],c.push(s);return c},Hi=function(){var n,t;return t=arguments[0],n=2<=arguments.length?Ou.call(arguments,1):[],function(){return t.apply(null,n)}},me=function(n){return function(){return n}},be=function(n,t){var e,r,i,o;if(n&&t&&n.length===t.length){for(e=r=0,i=n.length;i>r;e=++r)if(o=n[e],o!==t[e])return!1;return!0}return!1},bi=function(){var n,t,e,r,i,o,u,a,s;for(t=arguments[0],s=2<=arguments.length?Ou.call(arguments,1):[],e=[],r=0,i=t.length;i>r;r++)for(n=t[r],u=0,o=s.length;o>u;u++)a=s[u],n instanceof a&&e.push(n);return e},ki=function(){var n,t,e,r,i,o,u,a;for(t=arguments[0],a=2<=arguments.length?Ou.call(arguments,1):[],e=0,r=t.length;r>e;e++)for(n=t[e],o=0,i=a.length;i>o;o++)if(u=a[o],n instanceof u)return n},xi=function(n,t){var e,r,i,o;for(i=[],e=0,r=t.length;r>e;e++)o=t[e],i.push(ki(n,o));return i},rr=function(n,t){return t>n?new Z(n,t):new Z(t,n)},ze=function(n){var t,e,r,i,o;for(i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=0,e=n.length;e>t;t++)o=n[t],void 0!==o&&(i>=o&&(i=o),o>=r&&(r=o));return new Z(i,r)},Ae=function(n,t){var e,r,i,o,u,a;for(o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,e=r=0,u=n;u>=0?u>r:r>u;e=u>=0?++r:--r)void 0!==(a=t(e))&&(o>=a&&(o=a),a>=i&&(i=a));return new Z(o,i)},je=function(n){return function(t){return t.min>=n&&t.max>n?1:t.min<n&&t.max<=n?-1:0}},Fe=je(0),Xe=function(n,t){return new Z(Math.min(n.min,t.min),Math.max(n.max,t.max))},Xi=function(n){return function(t){return t.min>n&&t.max>n?new Z(n,t.max):t.min<n&&t.max<n?new Z(t.min,n):t}},Yi=Xi(0),jr=function(n,t,e){return $.ajax({dataType:n,url:t,success:function(n,t,r){return e(null,n)},error:function(n,t,r){return e(r)}})},fr=function(n,t,e){var r,i,o;return i=function(){return t.length},r=function(n){return t[n]},o=e?function(n){return e(t[n],n)}:r,new xn(n,n,r,i,t,o)},Nr=function(n,t,e,r){return le(n,n,t,e,r)},le=function(n,t,e,r,i){var o,u,a,s;return a=ze(r),u=function(){return r.length},o=function(n){return r[n]},s=i?function(n){return i(r[n],n)}:o,new ee(n,t,e,o,u,a,s)},sr=function(n,t,e,r,i,o){var u,a;return u=Ae(r,i),a=o?function(n){return o(i(n),n)}:i,new ee(n,t,e,i,r,u,a)},wi=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,p,v,g,m,w;for(o=0,i={},v=t(),s=new Array(v),c=function(){var n,t,r;for(r=[],n=0,t=e.length;t>n;n++)m=e[n],r.push(i[m]=new d(o++,m));return r}(),h=p=0,g=v;g>=0?g>p:p>g;h=g>=0?++p:--p)l=n(h),m=void 0!==l?l:"?",(a=i[m])||c.push(i[m]=a=new d(o++,m)),s[h]=a;return u=function(n){return s[n]},w=function(n){return s[n].value},f=r?function(n){return r(s[n].value)}:function(n){return void 0!==(m=s[n].value)?_.escape(m):m},new tn(u,w,t,c,f)},ir=function(n,t,e,r,i){var o,u,a;return u=function(){return e.length},o=function(n){return e[n]},a=wi(o,u,r||[],i),new nn(n,n,t,a.at,a.valueAt,u,a.domain,a.format)},Be=function(n,t){var e,r,i,o,u,a;return i="All",r=new d(0,i),a=function(n){return i},e=function(){return r},o=function(){return t},u=function(){return i},new nn(n,n,zt,e,a,o,[r],u)},ar=function(n,t,e,r,i){var o,u;return u=_.indexBy(t,function(n){return n.name}),o=new an(n,t,u,e,r,null,null,null,i||{}),o.evaluate=function(t){var e,i,a,s;return i=_.isArray(t)?t:[t],a=function(){var a,c,l;for(l=[],a=0,c=i.length;c>a;a++)if(e=i[a],e instanceof Cn)l.push(o.evaluate(e.evaluate(o)));else if(e instanceof Qn){if(!r)throw new Error("Cannot compute aggregate ["+e.name+"] on an unaggregated frame.");l.push(o.evaluate(e.evaluate(o,r)))}else{if(!(e instanceof en))throw new Error("Cannot evaluate ["+t+"] on frame ["+n+"].");if(!(s=u[e.name]))throw new Error("Vector ["+e.name+"] does not exist in frame ["+n+"].");l.push(s)}return l}(),_.flatten(a)},o.attach=function(e){if(u[e.name])throw new Error("Cannot attach vector ["+e.name+"]: a vector by that name already exists in frame ["+n+"]");return t.push(e),u[e.name]=e,e},o.exists=function(n){return u[n]?!0:!1},o},Ur=function(n){var t,e,r,i,o,u,a,s,c,l,f;for(f=new Array(n.indices.length),e=_.map(n.vectors,function(n){return n instanceof nn?n.valueAt:n.at}),c=n.indices,i=0,o=c.length;o>i;i++)for(r=c[i],f[r]=l=new Array(n.vectors.length),s=a=0,u=e.length;u>a;s=++a)t=e[s],l[s]=t(r);return f},wr=function(n){return new Hn(bi(n,oe),bi(n,wn),bi(n,ln),bi(n,hn))},ur=function(n){return _.map(n,function(n){return new en(n)})},or=function(n){return new Cn(function(t){var e,r,i,o,u,a,s,c,l;if(l=_.head(t.evaluate(n)),l instanceof nn)return n;for(a=l.count(),e=l.at,i=new Array(a),o=u=0,s=a;s>=0?s>u:u>s;o=s>=0?++u:--u)void 0!==(c=e(o))&&(i[o]=""+c);return t.attach(r=ir("factor("+l.label+")",zt,i)),[new en(r.name)]})},Ve=function(n){return new Cn(function(t){return t.attach(Be(n,t.indices.length)),[new en(n)]})},ao=Er([String,function(n){return ao(new en(n))}],[en,function(n){return or(n)}],[kt,function(n){var t;return t=n.value,Ve(t)}]),Cr=function(n,t){return new Cn(function(e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W;if(W=_.head(e.evaluate(n)),W instanceof nn)throw new Error("Cannot stack factor ["+W.label+"]: expecting vector.");for(g=W.count(),y=new Array(g),l=new Array(g),b="low("+W.name+", "+t+")",c="high("+W.name+", "+t+")",i=W.at,u=e.cube,t=Math.min(t,u.dimension),o=u.cells,w=s=0,r=new Array(t),C=e.indices,p=0,v=C.length;v>p;p++){for(f=C[p],m=o[f].levels,h=k=0,S=t;S>=0?S>k:k>S;h=S>=0?++k:--k)if(r[h]!==m[h].category){for(w=s=0,d=x=0,q=t;q>=0?q>x:x>q;d=q>=0?++x:--x)r[d]=m[d].category;break}N=i(f),0>N?(y[f]=w,l[f]=w+=N):(y[f]=s,l[f]=s+=N)}return a=function(n,t){return W.format(t)},e.attach(le(b,W.name,W.type,y,a)),e.attach(le(c,W.name,W.type,l,a)),[new en(b),new en(c)]})},Fo=Er([String,Number,function(n,t){return Fo(new en(n),t)}],[en,Number,function(n,t){return Cr(n,t)}]),Go=function(n){var t;return t=Ne(0,n.length-1),function(e){return n[t(-1+Math.round(e*n.length))]}},Pe=function(n){var t,e,r,i,o,u,a,s;return s=function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)a=n[t],(a||0===a)&&r.push(a);return r}(),s.sort(function(n,t){return n-t}),e=s[0],t=s[s.length-1],u=Go(s),r=u(.25),i=u(.5),o=u(.75),[e,r,i,o,t]},he=function(n){var t,e,r,i,o;for(i=0,t=0,e=0,r=n.length;r>e;e++)o=n[e],void 0!==o&&(i+=o,t++);return i/t},de=function(n){var t,e,r,i;for(t=0,e=0,r=n.length;r>e;e++)i=n[e],void 0!==i&&t++;return t},pe=function(n){var t,e,r,i;for(r=Number.NEGATIVE_INFINITY,t=0,e=n.length;e>t;t++)i=n[t],void 0!==i&&i>=r&&(r=i);return r},ve=function(n){var t,e,r,i;for(r=Number.POSITIVE_INFINITY,t=0,e=n.length;e>t;t++)i=n[t],void 0!==i&&r>=i&&(r=i);return r},ge=function(n){var t,e,r,i;for(r=0,t=0,e=n.length;e>t;t++)i=n[t],void 0!==i&&(r+=i);return r},Re=function(n,t,e,r,i){return new Qn(function(o,u){var a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x;if(m=t+"("+n.name+")",o.exists(m))return new en(m);for(x=_.head(u.frame.evaluate(n)),a=x.at,l=new Array(u.cells.length),w=u.cells,h=d=0,p=w.length;p>d;h=++d){for(s=w[h],k=[],b=s.indices,g=0,v=b.length;v>g;g++)f=b[g],void 0!==(y=a(f))&&k.push(y);l[h]=i(k)}return o.attach(c=Nr(m,e,l,r)),[new en(c.name)]})},Qi=function(n,t,e,r){return Er([String,function(i){return Re(new en(i),n,t,e,r)}],[en,function(i){return Re(i,n,t,e,r)}])},eo=Qi("count",Xt,_.identity,de),Zi=Qi("avg",Xt,_.identity,he),Co=Qi("max",Xt,_.identity,pe),So=Qi("min",Xt,_.identity,ve),Ro=Qi("sum",Xt,_.identity,ge),ho=function(){var n,t,e;return t=1<=arguments.length?Ou.call(arguments,0):[],e=function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)if(n=t[e],n instanceof en)i.push(n);else{if(!_.isString(n))throw new Error("Cannot group by ["+n+"]");i.push(new en(n))}return i}(),new ln(e)},Ji=Er([[String],Function,function(n,t){return new oe(ur(n),t)}]),Do=function(){var n,t,e;return e=2<=arguments.length?Ou.call(arguments,0,t=arguments.length-1):(t=0,[]),n=arguments[t++],Ji(e,n)},yo=Er([Number,Number,function(n,t){return new wn(n,t)}],[Number,function(n){return new wn(0,n)}]),Ki=Er([[String],Function,function(n,t){return new hn(ur(n),t)}],[[en],Function,function(n,t){return new hn(n,t)}]),vo=function(){var n,t,e;return e=2<=arguments.length?Ou.call(arguments,0,t=arguments.length-1):(t=0,[]),n=arguments[t++],Ki(e,n)},uo=function(n){return function(t){return t===n}},qo=function(n){return function(t){return t!==n}},xo=function(n){return function(t){return n>t}},po=function(n){return function(t){return t>n}},wo=function(n){return function(t){return n>=t}},fo=function(n){return function(t){return t>=n}},bo=function(n){if(Mt!==Su(n))throw new Error("like ["+n+"]: expecting RegExp");return function(t){return n.test(t)}},mo=function(n){return function(t){var e,r,i;for(r=0,i=n.length;i>r;r++)if(e=n[r],e===t)return!0;return!1}},No=function(n){return function(t){var e,r,i;for(r=0,i=n.length;i>r;r++)if(e=n[r],e===t)return!1;return!0}},Uo=function(t,e){var r,i,o,u,a,s,c,l,f,h,d;return c=e.where.length?ar(t.label,t.vectors,_i(t,e.where)):t,h=e.group.length?(s=Ci(e.group,function(n){return n.fields}),u=function(){var n,t,e;for(e=[],n=0,t=s.length;t>n;n++){if(a=s[n],d=_.head(c.evaluate(a)),!(d instanceof nn))throw new Error("Cannot group by ["+a.name+"]: not a Factor.");e.push(d)}return e}(),l={0:new mn(n,c.indices,{})},xe(l,u,0),i=[],Oe(l[0].children,s.length-1,i,0,new Array(s.length)),o=new j(c,l,i,s.length),r=fe(c.label+"'",o,u),e.having.length?ar(r.label,r.vectors,_i(r,e.having),r.cube):r):c,e.limit.length?(f=e.limit[e.limit.length-1],ar(h.label,h.vectors,h.indices.slice(f.offset,f.offset+f.length))):h},_i=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m;for(e=n.indices,l=0,f=t.length;f>l;l++){for(g=t[l],s=[],m=function(){var t,e,r,i;for(r=g.fields,i=[],e=0,t=r.length;t>e;e++)u=r[e],i.push(_.head(n.evaluate(u)));return i}(),o=_.map(m,function(n){return n instanceof nn?n.valueAt:n.at}),p=0,h=e.length;h>p;p++){for(a=e[p],r=new Array(m.length),c=v=0,d=o.length;d>v;c=++v)i=o[c],r[c]=i(a);g.predicate.apply(null,r)&&s.push(a)}e=s}return e},fe=function(n,t,e){var r,i,o;return r=_.range(t.cells.length),o=function(){var n,r,o;for(o=[],i=n=0,r=t.dimension;r>=0?r>n:n>r;i=r>=0?++n:--n)o.push(mi(t,e[i],i));return o}(),ar(n,o,r,t)},xe=function(n,t,e){var r,i,o,u,a,s,c,l,f,h;r=t[e].at;for(s in n){for(f=n[s],u=f.children,h=f.indices,c=0,l=h.length;l>c;c++)a=h[c],i=r(a),(o=u[i.key])||(u[i.key]=o=new mn(i,[],{})),o.indices.push(a);e<t.length-1&&xe(u,t,e+1)}},Oe=function(n,t,e,r,i){var o,u;for(o in n)u=n[o],i[r]=u,r===t?e.push(new p(Le(i),u.indices)):Oe(u.children,t,e,r+1,i)},mi=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v;for(a=new Array(n.cells.length),s={},c=[],p=n.cells,f=h=0,d=p.length;d>h;f=++h)o=p[f],a[f]=i=o.levels[e].category,s[i.value]||(s[i.value]=i,c.push(i));return r=function(n){return a[n]},v=function(n){return a[n].value},l=function(n){return a[n].value},u=function(){return a.length},new nn(t.label,t.label,t.type,r,v,u,c,l)},S={c10:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c20:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],c20b:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],c20c:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]},$i=function(n){return n>10?S.c20:S.c10},Te=function(n){var t,e,r,i;return i=n.rgb(),r=i[0],e=i[1],t=i[2],chroma.rgb(r,e,t)},Ye=function(n,t){return t>=0&&1>t?Te(n).alpha(t).css():n.css()},Lr=function(n,t,e,r){var i;return i=Math.sqrt(r/Wu),n.beginPath(),n.arc(t,e,i,0,Tu,!1),n.closePath()},Vr=function(n,t,e,r){var i;return i=.5*Math.sqrt(r),n.save(),n.translate(t,e),n.beginPath(),n.moveTo(i,i),n.lineTo(-i,i),n.lineTo(-i,-i),n.lineTo(i,-i),n.closePath(),n.restore()},Rr=function(n,t,e,r){var i,o;return i=.5*Math.sqrt(r/5),o=3*i,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(o,i),n.lineTo(i,i),n.lineTo(i,o),n.lineTo(-i,o),n.lineTo(-i,i),n.lineTo(-o,i),n.lineTo(-o,-i),n.lineTo(-i,-i),n.lineTo(-i,-o),n.lineTo(i,-o),n.lineTo(i,-i),n.lineTo(o,-i),n.closePath(),n.restore()},Br=function(n,t,e,r){var i,o;return o=Math.sqrt(r/(2*Pt)),i=o*Pt,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(i,0),n.lineTo(0,o),n.lineTo(-i,0),n.lineTo(0,-o),n.closePath(),n.restore()},Gr=function(n,t,e,r){var i,o;return i=Math.sqrt(r/_t),o=i*_t/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(0,-o),n.lineTo(i,o),n.lineTo(-i,o),n.closePath(),n.restore()},Dr=function(n,t,e,r){var i,o;return i=Math.sqrt(r/_t),o=i*_t/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(0,o),n.lineTo(i,-o),n.lineTo(-i,-o),n.closePath(),n.restore()},$r=function(n,t,e,r){var i,o;return o=Math.sqrt(r/_t),i=o*_t/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(i,0),n.lineTo(-i,o),n.lineTo(-i,-o),n.closePath(),n.restore()},Hr=function(n,t,e,r){var i,o;return o=Math.sqrt(r/_t),i=o*_t/2,n.save(),n.translate(t,e),n.beginPath(),n.moveTo(-i,0),n.lineTo(i,-o),n.lineTo(i,o),n.closePath(),n.restore()},vt={circle:Lr,square:Vr,cross:Rr,diamond:Br,triangleUp:Gr,triangleDown:Dr,triangleLeft:Hr,triangleRight:$r},pt={c8:["circle","square","cross","diamond","triangleUp","triangleDown","triangleLeft","triangleRight"]},Gi=function(){return pt.c8},mu=function(n){return function(t){return void 0!==t?n(t):void 0}},pr=function(n,t){var e;return e=d3.scale.linear().domain([n.min,n.max]).range([t.min,t.max]).nice(),[mu(e),e.tickFormat,e.ticks]},vr=function(n,t){var e,r,i,o,u,a,s;for(r=0,e={},o=0,u=n.length;u>o;o++)i=n[o],e[i.key]=r++;return a=(t.max-t.min)/n.length/2,
s=t.min,mu(function(n){return s+2*e[n.key]*a+a})},Ue=function(n,t){var e,r;return r=t.values,e=r.length,mu(function(n){return r[n.key%e]})},kr=function(n,t){return mu(d3.scale.linear().domain([n.min,n.max]).range([t.min,t.max]))},nr=function(n,t){return mu(d3.scale.linear().domain([n.min,n.mid,n.max]).range([t.min,t.mid,t.max]))},_r=function(n,t){return mu(chroma.scale([t.min,t.max]).domain([n.min,n.max]).mode("lch"))},Ze=function(n,t){var e,r;return e=chroma.scale([t.min,t.mid]).domain([n.min,n.mid]).mode("lch"),r=chroma.scale([t.mid,t.max]).domain([n.mid,n.max]).mode("lch"),function(t){return void 0!==t?t<n.mid?e(t):r(t):void 0}},Je=Er([ft,q,_r],[H,q,Ze]),lr=Er([ft,ft,kr],[H,H,nr]),Ce=function(n){var t;return t=n.toString(16),1===t.length?"0"+t:t},Ke=function(n){var t,e,r,i;return t=n.context,r=n.ratio,e=function(){return"#fff"},i=function(n,e){var i,o,u,a,s;return s=t.getImageData(n*r,e*r,1,1).data,a=s[0],u=s[1],o=s[2],i=s[3],255===a&&255===u&&255===o&&255===i},new m(e,i)},dr=function(n){var t,e,r,i,o,u;return e=n.context,o=n.ratio,t=0,r={},i=function(n){var e,i,o,u;return i=t++,t>=C&&(t=0),r[i]=n,u=i>>16&255,o=i>>8&255,e=255&i,"#"+Ce(u)+Ce(o)+Ce(e)},u=function(n,t){var i,u,a,s,c,l;return l=e.getImageData(n*o,t*o,1,1).data,c=l[0],s=l[1],u=l[2],i=l[3],255===i?(a=(c<<16)+(s<<8)+u,r[a]):void 0},new Wn(i,u)},ai=function(n,t){var e,r,i,o,u,a,s;return s=n.scale,r=n.domain,a=n.range,o=n.guide,u=t.label,e=t.at,i=function(n){return s(e(n))},new Bn(u,i,t,r,a,o)},ni=function(n,t){return new T(n.scale(t))},Zr=function(n,t){var e,r,i,o,u,a,s;return t instanceof Ht||t instanceof Qt?(s=_.head(n.evaluate(t.field)),s instanceof nn?(t.range||(t.range=new h($i(s.domain.length))),u=Ue(s.domain,t.range),e=s.at,i=function(n){return chroma(u(e(n)))},new x(s.label,i,s,s.domain,t.range,null)):(r=function(){switch(Fe(s.domain)){case 1:return new ft(s.domain.min,s.domain.max);case-1:return new ft(s.domain.min,s.domain.max);default:return new H(s.domain.min,0,s.domain.max)}}(),a=Fe(r),o=t.range?t.range instanceof D?r instanceof ft?1===a?new lt(t.range.mid,t.range.max):new lt(t.range.min,t.range.mid):t.range:(r instanceof H?r=new ft(r.min,r.max):void 0,t.range):r instanceof ft?1===a?new lt("#deebf7","#3182bd"):new lt("#e6550d","#fee6ce"):new D("#fc8d59","#ffffbf"),u=Je(r,o),e=s.at,i=function(n){return u(e(n))},new x(s.label,i,s,r,o,null))):new T(t.value)},ii=function(n,t){var e,r,i,o,u,a;if(t instanceof $t||t instanceof Zt){if(a=_.head(n.evaluate(t.field)),a instanceof nn)throw new Error("Could not encode opacity. Vector ["+a.label+"] is a Factor.");return r=new ft(a.domain.min,a.domain.max),o=t.range?new ft(qe(t.range.min),qe(t.range.max)):t.range=new ft(.05,1),u=lr(r,o),e=a.at,i=function(n){return u(e(n))},new Yn(a.label,i,a,r,o,null)}return new T(qe(t.value))},di=function(n,t){var e,r;return n&&t?(e=n.encode,r=t.encode,new Dt("("+n.label+", "+t.label+")",function(n){return Ye(e(n),r(n))})):void 0},gi=function(n,t){return function(e,r,i){var o,u,a,s,c,l;if(r instanceof n){if(l=_.head(e.evaluate(r.field)),l instanceof nn)throw new Error("Could not encode size. Vector ["+l.label+"] is a Factor.");return u=new ft(l.domain.min,l.domain.max),s=r.range?new ft(qe(r.range.min),qe(r.range.max)):r.range=new ft(.05,1),c=lr(u,s),o=l.at,a=function(n){return i*c(o(n))},new t(l.label,a,u,s,null)}return new T(i*qe(r.value))}},fi=gi(Jt,wt),vi=gi(te,wt),ei=gi(Gt,wt),Kr=function(n,t){var e,r,i,o,u,a;if(t instanceof Jt){if(a=_.head(n.evaluate(t.field)),a instanceof nn)throw new Error("Could not encode size. Vector ["+a.label+"] is a Factor.");return r=new ft(a.domain.min,a.domain.max),o=t.range?new ft(xu(t.range.min),xu(t.range.max)):t.range=new ft(xu(Or),xu(30)),u=lr(r,o),e=a.at,i=function(n){return u(e(n))},new wt(a.label,i,a,r,o,null)}return new T(xu(t.value))},ri=function(n,t){var e,r,i,o,u,a;if(t instanceof Ut){if(a=_.head(n.evaluate(t.field)),a instanceof nn)throw new Error("Could not encode lineWidth. Vector ["+a.label+"] is a Factor.");return r=new ft(a.domain.min,a.domain.max),o=t.range?new ft(t.range.min,t.range.max):t.range=new ft(1.5,15),u=lr(r,o),e=a.at,i=function(n){return u(e(n))},new wt(a.label,i,a,r,o,null)}return new T(t.value)},li=function(n,t){var e,r,i,o;if(t instanceof Kt){if(o=_.head(n.evaluate(t.field)),!(o instanceof nn))throw new Error("Could not encode shape. Vector ["+o.label+"] is not a Factor.");return t.range||(t.range=new h(Gi(o.domain.length))),i=Ue(o.domain,t.range),e=o.at,r=function(n){return vt[i(e(n))]},new dt(o.label,r,o,o.domain,t.range,null)}return new T(vt[t.value]||vt.circle)},pi=function(n,t){var e,r;return t?(r=function(){var r,i,o,u;for(o=t.fields,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(_.head(n.evaluate(e)));return u}(),new Lt(r)):void 0},Ii=function(n,t){return[null!=n?n:new O(chroma(_.head(S.c10))),null!=t?t:new E(1)]},zi=function(n,t,e){return[null!=n?n:new z(chroma(_.head(S.c10))),null!=t?t:new A(1),null!=e?e:new X(1.5)]},Mi=function(n,t,e,r,i,o,u){var a,s,c,l;return a=n||t,s=e||r||i,a||s||(o&&(a=!0),u&&(s=!0)),a&&(c=Ii(n,t),n=c[0],t=c[1]),s&&(l=zi(e,r,i),e=l[0],r=l[1],i=l[2]),[n,t,e,r,i]},ti=function(n,t){var e,r;return t.fillColor||t.fillOpacity?[e=Zr(n,t.fillColor),r=ii(n,t.fillOpacity),di(e,r)]:[]},hi=function(n,t){var e,r;return t.strokeColor||t.strokeOpacity||t.lineWidth?[e=Zr(n,t.strokeColor),r=ii(n,t.strokeOpacity),di(e,r),ri(n,t.lineWidth)]:[]},We=function(n,t,e,r,i){return n.beginPath(),n.rect(t,e,r,i),n.clip()},Fr=function(n,t,e){return n.lineWidth=e,n.strokeStyle=t,n.stroke()},Xr=function(n,t){return n.fillStyle=t,n.fill()},Ir=function(n,t,e,r,i){return n.beginPath(),n.moveTo(t,e),n.lineTo(r,i),n.stroke()},zr=function(n,t,e,r,i){return n.beginPath(),r>e?n.rect(t-i/2,e,i,r-e):n.rect(t-i/2,r,i,e-r),n.closePath()},Mr=function(n,t,e,r,i){return n.beginPath(),e>t?n.rect(t,r-i/2,e-t,i):n.rect(e,r-i/2,t-e,i),n.closePath()},Ar=function(n,t,e,r,i,o,u,a,s,c){var l,f;return void 0!==t&&void 0!==e&&void 0!==r&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==s&&void 0!==c?(n.strokeStyle=s,n.lineWidth=c,Mr(n,e,i,u,a),n.stroke(),l=a/2,f=a/4,Ir(n,r,u-l,r,u+l),Ir(n,e,u,t,u),Ir(n,i,u,o,u),Ir(n,t,u-f,t,u+f),Ir(n,o,u-f,o,u+f)):void 0},Pr=function(n,t,e,r,i,o,u,a,s,c){var l,f;return void 0!==t&&void 0!==e&&void 0!==r&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a&&void 0!==s&&void 0!==c?(n.strokeStyle=s,n.lineWidth=c,zr(n,t,r,o,a),n.stroke(),l=a/2,f=a/4,Ir(n,t-l,i,t+l,i),Ir(n,t,r,t,e),Ir(n,t,o,t,u),Ir(n,t-f,e,t+f,e),Ir(n,t-f,u,t+f,u)):void 0},su=function(n,t,e,r){var i,o,u,a,s,c,l,f,h;u=n.slope,i=n.intercept,a=n.strokeColor,s=n.strokeOpacity,o=n.lineWidth,void 0!==i?0===u?e instanceof Vn&&(c=t.range.min,l=t.range.max,f=h=e.scale(i)):t instanceof Vn&&e instanceof Vn&&(c=t.scale(t.domain.min),l=t.scale(t.domain.max),f=e.scale(u*t.domain.min+i),h=e.scale(u*e.domain.max+i)):t instanceof Vn&&(c=l=t.scale(u),f=e.range.min,h=e.range.max),void 0!==c&&void 0!==f&&void 0!==l&&void 0!==h&&(r.save(),r.strokeStyle=Ye(a,s),r.lineWidth=o,Ir(r,c,f,l,h),r.restore())},cr=function(n){var t,e,r,i,o,u;return r=n.position.coordinates,i=r[0],t=r[1],o=n.strokeColor,u=n.strokeOpacity,e=n.lineWidth,new bn(i?i.value:0,t?t.value:void 0,o?o.value:chroma("red"),u?u.value:1,e?e.value:1.5)},mr=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p;return o=t[0],u=t[1],h=new yt([o],[u]),l=null!=(a=n.shape)?a:new I("circle"),f=null!=(s=n.size)?s:new M(Or),c=Mi(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!1,!0),e=c[0],r=c[1],d=c[2],p=c[3],i=c[4],new Ln(h,o,u,l,f,e,r,d,p,i,n.tooltip)},ui=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;return s=ai(e,t.positionX),c=ai(r,t.positionY),h=li(n,t.shape),d=Kr(n,t.size),l=ti(n,t),o=l[0],u=l[1],i=l[2],f=hi(n,t),v=f[0],g=f[1],p=f[2],a=f[3],m=pi(n,t.tooltip),new Pn(s,c,h,d,i,o,u,p,v,g,a,m)},Ti=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(l=t.positionX,f=t.positionY,h=t.shape,d=t.size,r=t.fill,p=t.stroke,s=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],v=l(i),g=f(i),void 0!==v&&void 0!==g&&(h(i)(e,v,g,d(i)),e.lineWidth=2+(p?s(i):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",c=0,a=n.length;a>c;c++)i=n[c],v=l(i),g=f(i),void 0!==v&&void 0!==g&&(h(i)(e,v,g,d(i)),p&&(e.lineWidth=s(i),e.stroke()),r&&e.fill());return e.restore()},Bi=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v;for(c=t.positionX,l=t.positionY,f=t.shape,h=t.size,d=t.stroke,a=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],p=c(i),v=l(i),void 0!==p&&void 0!==v&&(s=r.put(i),f(i)(e,p,v,h(i)),e.fillStyle=s,e.fill(),d&&(e.lineWidth=a(i),e.strokeStyle=s,e.stroke()));return e.restore()},fu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p;for(s=t.positionX,c=t.positionY,l=t.shape,f=t.size,r=t.fill,h=t.stroke,a=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],d=s(i),p=c(i),void 0!==d&&void 0!==p&&(l(i)(e,d,p,f(i)),h&&(e.lineWidth=a(i),e.strokeStyle=h(i),e.stroke()),r&&(e.fillStyle=r(i),e.fill()));return e.restore()},yu=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d;for(c=t.positionX,l=t.positionY,f=[],a=0,s=n.length;s>a;a++)u=n[a],h=c(u),d=l(u),void 0!==h&&void 0!==d&&h>=e&&i>=h&&d>=r&&o>=d&&f.push(u);return f},Cu=function(n){return _.map(n,function(n){return n.type}).join(", ")},br=function(n,t){var e,r,i,o,a,s,c,l,f,h,d,p,v,g,m,w,b,_,k,x,C,S,q;switch(S=Cu(t)){case"String, Number":return a=t[0],h=t[1],k=new yt([a],[h]),q=null!=(d=n.width)?d:new P(.8),p=Mi(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=p[0],r=p[1],x=p[2],C=p[3],o=p[4],new y(k,a,void 0,h,q,e,r,x,C,o,n.tooltip);case"String, Number, Number":return a=t[0],f=t[1],h=t[2],k=new yt([a],[f,h]),q=null!=(v=n.width)?v:new P(.8),g=Mi(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=g[0],r=g[1],x=g[2],C=g[3],o=g[4],new y(k,a,f,h,q,e,r,x,C,o,n.tooltip);case"Number, String":return c=t[0],l=t[1],k=new yt([c],[l]),i=null!=(m=n.height)?m:new Y(.8),w=Mi(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=w[0],r=w[1],x=w[2],C=w[3],o=w[4],new u(k,void 0,c,l,i,e,r,x,C,o,n.tooltip);case"Number, Number, String":return s=t[0],c=t[1],l=t[2],k=new yt([s,c],[l]),i=null!=(b=n.height)?b:new Y(.8),_=Mi(n.fillColor,n.fillOpacity,n.strokeColor,n.strokeOpacity,n.lineWidth,!0,!1),e=_[0],r=_[1],x=_[2],C=_[3],o=_[4],new u(k,s,c,l,i,e,r,x,C,o,n.tooltip);default:throw new Error("Cannot create rect marks with vectors of type ["+S+"]")}},Qr=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;return s=ai(e,t.positionX),c=t.positionY1?ai(r,t.positionY1):ni(r,0),l=ai(r,t.positionY2),m=fi(n,t.width,e.rect.width/e.domain.length),f=ti(n,t),o=f[0],u=f[1],i=f[2],h=hi(n,t),p=h[0],v=h[1],d=h[2],a=h[3],g=pi(n,t.tooltip),new w(s,c,l,m,i,o,u,d,p,v,a,g)},Jr=function(n,t,e,r){var o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_,k;switch(t.space.x.length){case 1:_=t.space.x[0],l=ni(e,0),f=ai(e,_);break;default:d=t.space.x,y=d[0],_=d[1],l=ai(e,y),f=ai(e,_)}return k=t.space.y[0],h=ai(r,k),s=fi(n,t.height,r.rect.height/r.domain.length),p=ti(n,t),u=p[0],a=p[1],o=p[2],v=hi(n,t),m=v[0],w=v[1],g=v[2],c=v[3],b=pi(n,t.tooltip),new i(l,f,h,s,o,u,a,g,m,w,c,b)},Ni=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w;for(l=t.positionX,f=t.positionY1,h=t.positionY2,v=t.width,r=t.fill,d=t.stroke,s=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],g=l(i),m=f(i),w=h(i),p=v(i),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==p&&(zr(e,g,m,w,p),e.lineWidth=2+(d?s(i):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",c=0,a=n.length;a>c;c++)i=n[c],g=l(i),m=f(i),w=h(i),p=v(i),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==p&&(zr(e,g,m,w,p),d&&(e.lineWidth=s(i),e.stroke()),r&&e.fill());return e.restore()},qi=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w;for(h=t.positionX1,d=t.positionX2,p=t.positionY,o=t.height,r=t.fill,v=t.stroke,l=t.lineWidth,e.save(),a=0,s=n.length;s>a;a++)u=n[a],g=h(u),m=d(u),w=p(u),i=o(u),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==i&&(Mr(e,g,m,w,i),e.lineWidth=2+(v?l(u):1),e.stroke());for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.fillStyle=e.strokeStyle="black",f=0,c=n.length;c>f;f++)u=n[f],g=h(u),m=d(u),w=p(u),i=o(u),void 0!==g&&void 0!==m&&void 0!==w&&void 0!==i&&(Mr(e,g,m,w,i),v&&(e.lineWidth=l(u),e.stroke()),r&&e.fill());return e.restore()},Li=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;for(c=t.positionX,l=t.positionY1,f=t.positionY2,p=t.width,h=t.stroke,a=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],v=c(i),g=l(i),m=f(i),d=p(i),void 0!==v&&void 0!==g&&void 0!==m&&void 0!==d&&(s=r.put(i),zr(e,v,g,m,d),Xr(e,s),h&&Fr(e,s,a(i)));return e.restore()},ji=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m;for(f=t.positionX1,h=t.positionX2,d=t.positionY,o=t.height,p=t.stroke,c=t.lineWidth,e.save(),a=0,s=n.length;s>a;a++)u=n[a],v=f(u),g=h(u),m=d(u),i=o(u),void 0!==v&&void 0!==g&&void 0!==m&&void 0!==i&&(l=r.put(u),Mr(e,v,g,m,i),Xr(e,l),p&&Fr(e,l,c(u)));return e.restore()},ru=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(s=t.positionX,c=t.positionY1,l=t.positionY2,d=t.width,r=t.fill,f=t.stroke,a=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],p=s(i),v=c(i),g=l(i),h=d(i),void 0!==p&&void 0!==v&&void 0!==g&&void 0!==h&&(zr(e,p,v,g,h),f&&Fr(e,f(i),a(i)),r&&Xr(e,r(i)));return e.restore()},eu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(l=t.positionX1,f=t.positionX2,h=t.positionY,o=t.height,r=t.fill,d=t.stroke,c=t.lineWidth,e.save(),a=0,s=n.length;s>a;a++)u=n[a],p=l(u),v=f(u),g=h(u),i=o(u),void 0!==p&&void 0!==v&&void 0!==g&&void 0!==i&&(Mr(e,p,v,g,i),d&&Fr(e,d(u),c(u)),r&&Xr(e,r(u)));return e.restore()},bu=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(c=t.positionX,l=t.positionY1,f=t.positionY2,p=t.width,h=[],a=0,s=n.length;s>a;a++)u=n[a],v=c(u),w=l(u),b=f(u),w>b&&(y=w,w=b,b=y),d=p(u),void 0!==v&&void 0!==w&&void 0!==b&&void 0!==d&&(g=v-d/2,m=v+d/2,e>m||g>i||r>b||w>o||h.push(u));return h},wu=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(f=t.positionX1,h=t.positionX2,d=t.positionY,a=t.height,p=[],c=0,l=n.length;l>c;c++)s=n[c],v=f(s),g=h(s),w=d(s),v>g&&(m=v,v=g,g=m),u=a(s),void 0!==v&&void 0!==g&&void 0!==w&&void 0!==u&&(b=w-u/2,y=w+u/2,e>g||v>i||r>y||b>o||p.push(s));return p},yr=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b;switch(g=Cu(t)){case"String, Number, Number, Number, Number, Number":return w=t[0],i=t[1],o=t[2],u=t[3],a=t[4],s=t[5],d=new yt([w],[i,o,u,a,s]),m=null!=(c=n.width)?c:new P(.8),l=zi(n.strokeColor,n.strokeOpacity,n.lineWidth),p=l[0],v=l[1],r=l[2],new at(d,w,i,o,u,a,s,m,p,v,r,n.tooltip);case"Number, Number, Number, Number, Number, String":return i=t[0],o=t[1],u=t[2],a=t[3],s=t[4],b=t[5],d=new yt([i,o,u,a,s],[b]),e=null!=(f=n.height)?f:new P(.8),h=zi(n.strokeColor,n.strokeOpacity,n.lineWidth),p=h[0],v=h[1],r=h[2],new it(d,i,o,u,a,s,b,e,p,v,r,n.tooltip)}},si=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g;return u=ai(e,t.q0),a=ai(e,t.q1),s=ai(e,t.q2),c=ai(e,t.q3),l=ai(e,t.qn),g=ai(r,t.positionY),i=fi(n,t.height,r.rect.height/r.domain.length),f=hi(n,t),d=f[0],p=f[1],h=f[2],o=f[3],v=pi(n,t.tooltip),new et(u,a,s,c,l,g,i,h,d,p,o,v)},Oi=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(l=t.positionY,f=t.q0,h=t.q1,d=t.q2,p=t.q3,v=t.qn,r=t.height,g=t.stroke,s=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],Ar(e,f(i),h(i),d(i),p(i),v(i),l(i),r(i),g(i),2+(g?s(i):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",c=0,a=n.length;a>c;c++)i=n[c],Ar(e,f(i),h(i),d(i),p(i),v(i),l(i),r(i),g(i),s(i));return e.restore()},Vi=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(f=t.positionY,h=t.q0,d=t.q1,p=t.q2,v=t.q3,g=t.qn,o=t.height,m=t.stroke,c=t.lineWidth,e.save(),a=0,s=n.length;s>a;a++)u=n[a],w=h(u),b=g(u),y=f(u),i=o(u),void 0!==w&&void 0!==b&&void 0!==y&&void 0!==i&&(l=r.put(u),Mr(e,w,b,y,i),Xr(e,l),Fr(e,l,c(u)));return e.restore()},du=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p;for(s=t.positionY,c=t.q0,l=t.q1,f=t.q2,h=t.q3,d=t.qn,r=t.height,p=t.stroke,a=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],Ar(e,c(i),l(i),f(i),h(i),d(i),s(i),r(i),p(i),a(i));return e.restore()},_u=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_,k,x,C,S;for(h=t.positionY,d=t.q0,p=t.q1,v=t.q2,g=t.q3,m=t.qn,a=t.height,b=t.stroke,f=t.lineWidth,w=[],c=0,l=n.length;l>c;c++)s=n[c],y=d(s),_=m(s),x=h(s),y>_&&(k=y,y=_,_=k),u=a(s),void 0!==y&&void 0!==_&&void 0!==x&&void 0!==u&&(C=x-u/2,S=x+u/2,e>_||y>i||r>S||C>o||w.push(s));return w},ci=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g;return g=ai(e,t.positionX),o=ai(r,t.q0),u=ai(r,t.q1),a=ai(r,t.q2),s=ai(r,t.q3),c=ai(r,t.qn),v=fi(n,t.width,e.rect.width/e.domain.length),l=hi(n,t),h=l[0],d=l[1],f=l[2],i=l[3],p=pi(n,t.tooltip),new ot(g,o,u,a,s,c,v,f,h,d,i,p)},Ei=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g;for(c=t.positionX,l=t.q0,f=t.q1,h=t.q2,d=t.q3,p=t.qn,g=t.width,v=t.stroke,a=t.lineWidth,e.save(),i=0,o=n.length;o>i;i++)r=n[i],Pr(e,c(r),l(r),f(r),h(r),d(r),p(r),g(r),v(r),2+(v?a(r):1));for(e.restore(),e.save(),e.globalCompositeOperation="destination-out",e.strokeStyle="black",s=0,u=n.length;u>s;s++)r=n[s],Pr(e,c(r),l(r),f(r),h(r),d(r),p(r),g(r),v(r),a(r));return e.restore()},Di=function(n,t,e,r){var i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y;for(c=t.positionX,l=t.q0,f=t.q1,h=t.q2,d=t.q3,p=t.qn,m=t.width,v=t.stroke,a=t.lineWidth,e.save(),o=0,u=n.length;u>o;o++)i=n[o],w=c(i),b=l(i),y=p(i),g=m(i),void 0!==w&&void 0!==b&&void 0!==y&&void 0!==g&&(s=r.put(i),zr(e,w,b,y,g),Xr(e,s),Fr(e,s,a(i)));return e.restore()},pu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p;for(a=t.positionX,s=t.q0,c=t.q1,l=t.q2,f=t.q3,h=t.qn,p=t.width,d=t.stroke,u=t.lineWidth,e.save(),i=0,o=n.length;o>i;i++)r=n[i],Pr(e,a(r),s(r),c(r),l(r),f(r),h(r),p(r),d(r),u(r));return e.restore()},ku=function(n,t,e,r,i,o){var u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_,k,x,C,S;for(l=t.positionX,f=t.q0,h=t.q1,d=t.q2,p=t.q3,v=t.qn,b=t.width,m=t.stroke,c=t.lineWidth,g=[],a=0,s=n.length;s>a;a++)u=n[a],y=l(u),x=f(u),C=v(u),x>C&&(S=x,x=C,C=S),w=b(u),void 0!==y&&void 0!==x&&void 0!==C&&void 0!==w&&(_=y-w/2,k=y+w/2,e>k||_>i||r>C||x>o||g.push(u));return g},gr=function(n,t){var e,r,i,o,u,a,s;return r=t[0],i=t[1],u=new yt([r],[i]),o=zi(n.strokeColor,n.strokeOpacity,n.lineWidth),a=o[0],s=o[1],e=o[2],new zn(u,r,i,a,s,e,n.tooltip)},oi=function(n,t,e,r){var i,o,u,a,s,c,l,f;return o=ai(e,t.positionX),u=ai(r,t.positionY),a=hi(n,t),c=a[0],l=a[1],s=a[2],i=a[3],f=pi(n,t.tooltip),new Xn(o,u,s,c,l,i,f)},Wi=function(n,t,e){var r,i,o,u,a,s,c;for(u=t.positionX,a=t.positionY,e.save(),i=0,o=n.length;o>i;i++)r=n[i],s=u(r),c=a(r),e.lineWidth=1.5,e.strokeStyle="black",void 0!==s&&void 0!==c&&(Lr(e,s,c,64),e.stroke());return e.restore()},Ri=function(n,t,e,r){var i,o,u,a,s,c,l;for(a=t.positionX,s=t.positionY,e.save(),o=0,u=n.length;u>o;o++)i=n[o],c=a(i),l=s(i),void 0!==c&&void 0!==l&&(Lr(e,c,l,64),e.fillStyle=r.put(i),e.fill());return e.restore()},cu=function(n,t,e){var r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w,b,y,_;if(f=t.positionX,h=t.positionY,d=t.stroke,c=t.lineWidth,d instanceof T&&c instanceof T){for(e.strokeStyle=d(),e.lineWidth=c(),e.save(),r=!1,u=0,a=n.length;a>u;u++)o=n[u],g=f(o),b=h(o),void 0!==g&&void 0!==b?r?e.lineTo(g,b):(e.beginPath(),r=!0,e.moveTo(g,b)):(r&&e.stroke(),r=!1);return e.restore()}for(e.save(),e.lineCap="round",r=!1,m=void 0,y=void 0,p=void 0,l=0,s=n.length;s>l;l++)o=n[l],w=f(o),_=h(o),void 0!==w&&void 0!==_?(v=d(o),r&&(v!==p?(i=e.createLinearGradient(m,y,w,_),i.addColorStop(0,p||Rt),i.addColorStop(1,v||Rt),e.strokeStyle=i):e.strokeStyle=v,e.lineWidth=c(o),e.beginPath(),e.moveTo(m,y),e.lineTo(w,_),e.stroke()),r=!0,m=w,y=_,p=v):r=!1;return e.restore()},hr=Er([Fn,Array,mr],[In,Array,gr],[Jn,Array,br],[tt,Array,yr]),De=Er([yn,cr]),jn=new sn(ui,Bi,Ti,fu,yu),Mn=new sn(oi,Ri,Wi,cu,yu),b=new sn(Qr,Li,Ni,ru,bu),o=new sn(Jr,ji,qi,eu,wu),rt=new sn(si,Vi,Oi,du,_u),ut=new sn(ci,Di,Ei,pu,ku),no=Er([Number,null,function(n,t){return new s(n,void 0)}],[null,Number,function(n,t){return new s(void 0,t)}],[Number,Number,function(n,t){return new s(n,t)}],[null,null,function(){return new s(void 0,void 0)}]),io=Er([Number,Number,function(n,t){return new G(n,t)}]),oo=Er([Number,Number,function(n,t){return new U(n,t)}]),lo=Er([an,_.identity],[Function,function(n){return new L(n)}]),Vo=Er([Number,function(n){return new En(n)}],[Boolean,function(n){return new a(n)}],[Date,function(n){return new R(n)}],[String,function(n){return new kt(n)}]),Yo=Er([Array,function(n){return new h(n)}],[Number,function(n){return n>0?new ft(0,n):0>n?new ft(n,0):new H(-1,0,1)}],[String,function(n){return new lt(n,"black")}],[Number,Number,function(n,t){return t>=n?new ft(n,t):new ft(t,n)}],[String,String,function(n,t){return new lt(n,t)}],[Number,Number,Number,function(n,t,e){var r,i,o,u;return u=_.sortBy([n,t,e],_.identity),r=u[0],i=u[1],o=u[2],new H(r,i,o)}],[String,String,String,function(n,t,e){return new D(n,t,e)}]),Ee=function(n){var t,e,r,i,o;for(i=[],e=0,r=n.length;r>e;e++)if(t=n[e],t instanceof en)i.push(t);else{if(zt!==(o=Su(t)))throw new Error("Cannot create vector reference from ["+t+"] of type ["+o+"].");i.push(new en(t))}return i},Eo=function(){var n,t,e;return t=1<=arguments.length?Ou.call(arguments,0):[],new Rn(_.every(t,function(n){return n instanceof Bt})?function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(new W(n.value));return i}():function(){var n,r,i,o;for(i=Ee(t),o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(new Vt(e));return o}())},so=Er([kt,function(n){return new O(chroma(n.value))}],[String,function(n){return new Ht(new en(n))}],[en,function(n){return new Ht(n)}],[String,q,function(n,t){return new Ht(new en(n),t)}],[en,q,function(n,t){return new Ht(n,t)}],[String,h,function(n,t){return new Ht(new en(n),t)}],[en,h,function(n,t){return new Ht(n,t)}]),co=Er([En,function(n){return new E(n.value)}],[String,function(n){return new $t(new en(n))}],[en,function(n){return new $t(n)}],[String,ft,function(n,t){return new $t(new en(n),t)}],[en,ft,function(n,t){return new $t(n,t)}]),jo=Er([kt,function(n){return new z(chroma(n.value))}],[String,function(n){return new Qt(new en(n))}],[en,function(n){return new Qt(n)}],[String,q,function(n,t){return new Qt(new en(n),t)}],[en,q,function(n,t){return new Qt(n,t)}],[String,h,function(n,t){return new Qt(new en(n),t)}],[en,h,function(n,t){return new Qt(n,t)}]),Lo=Er([En,function(n){return new A(n.value)}],[String,function(n){return new Zt(new en(n))}],[en,function(n){return new Zt(n)}],[String,ft,function(n,t){return new Zt(new en(n),t)}],[en,ft,function(n,t){return new Zt(n,t)}]),Yr=function(n,t){return Er([En,function(t){return new n(t.value)}],[String,function(n){return new t(new en(n))}],[en,function(n){return new t(n)}],[String,ft,function(n,e){return new t(new en(n),e)}],[en,ft,function(n,e){return new t(n,e)}])},Po=Yr(M,Jt),Ho=Yr(P,te),go=Yr(Y,Gt),ko=Er([En,function(n){return new X(n.value)}],[String,function(n){return new Ut(new en(n))}],[en,function(n){return new Ut(n)}],[String,ft,function(n,t){return new Ut(new en(n),t)}],[en,ft,function(n,t){return new Ut(n,t)}]),Ao=Er([kt,function(n){return new I(n.value)}],[String,function(n){return new Kt(new en(n))}],[en,function(n){return new Kt(n)}],[String,h,function(n,t){return new Kt(new en(n),t)}],[en,h,function(n,t){return new Kt(n,t)}]),Bo=function(){var n;return n=1<=arguments.length?Ou.call(arguments,0):[],new ne(Ee(n))},Mo=function(){var n,t;return t=1<=arguments.length?Ou.call(arguments,0):[],1===t.length&&_.isNumber(n=_.head(t))?new Un(n):new ct(Ee(t))},Jo=function(n){var t,e,r,i,o;for(o=[],e=0,r=n.length;r>e;e++)switch(t=n[e],t.type){case"string":o.push({label:t.name,type:"String",domain:null!=(i=t.lightningDomain)?i:[],parse:ye});break;case"integer":o.push({label:t.name,type:"Number",parse:_e});break;case"number":o.push({label:t.name,type:"Number",parse:ke});break;default:throw new Error("Invalid type ["+t.type+"] for schema field ["+t.name+"]")}return o},Ko=function(n,t,e,r){var i,o,u,a,s,c,l,f;return a=Papa.parse(e,{skipEmptyLines:!0}),c=a.data,r&&c.shift(),f=function(){var n,r,a,f,h;for(h=[],u=n=0,r=t.length;r>n;u=++n){for(i=t[u],e=new Array(c.length),o=f=0,a=c.length;a>f;o=++f)s=c[o],void 0!==(l=i.parse(s[u]))&&(e[o]=l);switch(i.type){case"String":h.push(ir(i.label,i.type,e,i.domain));break;case"Number":h.push(Nr(i.label,i.type,e,_.identity));break;default:h.push(void 0)}}return h}(),ar(n,f,_.range(c.length))},to=function(n,t,e,r,i){return function(o){var u,a,s,c,l,f;return l=Math.floor((e-t)/r),u=function(n){return t+n*r},s=function(n,t){var e;return e=function(n){return t(u(n))},sr(n,n,"Number",l,e,_.identity)},f=function(){var n;n=[];for(c in i)a=i[c],n.push(s(c,a));return n}(),f.unshift(sr(n,n,"Number",l,u,_.identity)),o(null,ar("computed",f,_.range(l)))}},ro=function(n){return function(t){return jr("json",n+"/datapackage.json",function(e,r){var i,o;return e?t(e):(i=_.head(r.resources))?(o=i.path)?jr("text",n+"/"+o,function(n,e){if(n)return t(n);try{return t(null,Ko(r.name,Jo(i.schema),e,!0))}catch(o){return n=o,t(n)}}):t(new Error("Resource is missing attribute [path].")):t(new Error("No resources found in data package."))})}},er=function(){var n,t;return n=arguments[0],t=2<=arguments.length?Ou.call(arguments,1):[],function(){var e;return e=1<=arguments.length?Ou.call(arguments,0):[],we(n,xi(e,t))}},Oo=er(Fn,Rn,ht,mt,on,un,Ct,St,_n,jt),Xo=er(Jn,Rn,ue,pn,on,un,Ct,St,_n,jt),To=er(In,Rn,Ct,St,_n,jt),Io=er(tt,Rn,ue,pn,Ct,St,_n,jt),_o=er(yn,Rn,Ct,St,_n),Wo=function(n,t){var e;return e=function(n,t){var r,i,o,u;if(_.isArray(n)){for(i=n.length,o=[];i--;)r=n[i],null!==r&&_.isObject(r)?(e(r,t),o.push(t(r))):o.push(void 0);return o}u=[];for(i in n)Yu.call(n,i)&&(r=n[i],null!==r&&_.isObject(r)?(e(r,t),u.push(t(r))):u.push(void 0));return u},function(r){var i;return i=n.parse(r),e(i,function(n){var t;"CallExpression"===n.type&&"Identifier"===n.callee.type?_.isFunction(Ui[t=n.callee.name])&&(n.callee={type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"plot"},property:{type:"Identifier",name:t}}):"Identifier"===n.type&&_.isFunction(Ui[t=n.name])&&(delete n.name,n.type="MemberExpression",n.computed=!1,n.object={type:"Identifier",name:"plot"},n.property={type:"Identifier",name:t})}),t.generate(i)}},zo={maxCanvasSize:new gt(795,600),visualizationSize:new gt(300,300),axisLabelFont:"10px monospace",axisTickColor:"#4d4d4d",axisTitleFont:"bold 10px monospace",axisLabelColor:"#4d4d4d",gridLineColor:"#eee",originLineColor:"#ccc"},$o=function(n){return Math.round(n)+"px"},Qe=function(n,t){var e,r,i,o;e=document.createElement(n),i=e.style;for(r in t)o=t[r],i[r]=o;return e},Qo=function(n){for(var t;t=n.firstChild;)n.removeChild(t)},Sr=function(n){var t,e;t=document.createElement("style"),t.type="text/css",t.innerHTML=n,e=_.head(document.getElementsByTagName("head")),e.appendChild(t)},qr=function(n){var t,e,r,i,o,u,a,s,c;return e=diecut("table","tbody","tr","th","td"),i=e[0],o=e[1],s=e[2],a=e[3],u=e[4],r=function(){var e;e=[];for(t in n)c=n[t],e.push(s([u(t+":"),a(c)]));return e}(),au(i(o(r)))},Ge=function(n){var t,e,r,i,o,u,a;return a=n.width,o=n.height,i=document.createElement("canvas"),e=i.getContext("2d"),r=window.devicePixelRatio||1,t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,u=r/t,i.style.position="absolute",r!==t?(i.width=a*u,i.height=o*u,e.scale(u,u),i.style.width=$o(a),i.style.height=$o(o)):(i.width=a,i.height=o),new l(i,e,n,u)},Wr=function(n){var t,e,r,i,o,u,a,s,c,l,f,h;return f=function(){var t,e;for(e=[],a=t=1;5>=t;a=++t)e.push(Ge(n));return e}(),t=f[0],o=f[1],u=f[2],l=f[3],r=f[4],i=Qe("div",{position:"relative",overflow:"visible",width:$o(n.width),height:$o(n.height)}),i.className="lz",s=Qe("div",{position:"absolute",left:$o(0),top:$o(0),width:$o(0),height:$o(0),display:"none",outline:"1px dotted #999",background:"rgba(0, 0, 0, 0.05)"}),h=Qe("div",{position:"absolute",left:$o(0),top:$o(0),"max-width":$o(.9*n.width),display:"none"}),h.className="lz-tooltip",i.appendChild(t.element),i.appendChild(o.element),i.appendChild(s),i.appendChild(u.element),i.appendChild(h),c=dr(l),e=Ke(r),new re(n,i,t,o,u,l,r,s,h,c,e)},Si=function(n){var t,e,r;return r=null!=(e=n.target)?e:n.srcElement,t=r.getBoundingClientRect(),[n.clientX-t.left,n.clientY-t.top]},Se=function(n,t,e,r,i){var o,u,a,s,c,l,f,h,d,p;u=$(document),o=$(n),s=t.style,c=h=l=d=f=p=0,a=!1,o.on("mousemove",function(n){var t;return c=n.offsetX,h=n.offsetY,(void 0===c||void 0===h)&&(t=Si(n),c=t[0],h=t[1]),a?(s.left=$o(c>l?l:c),s.top=$o(h>d?d:h),s.width=$o(Math.abs(c-l)),s.height=$o(Math.abs(h-d))):e(c,h)}),o.on("mousedown",function(n){var t;return n.preventDefault(),l=n.offsetX,d=n.offsetY,(void 0===l||void 0===d)&&(t=Si(n),l=t[0],d=t[1]),a=!0,s.display="block",s.left=$o(l),s.top=$o(d),u.on("mouseup",function(n){var t;return n.preventDefault(),f=n.offsetX,p=n.offsetY,(void 0===f||void 0===p)&&(t=Si(n),f=t[0],p=t[1]),a=!1,s.display="none",s.width=$o(0),s.height=$o(0),u.off("mouseup"),Math.abs(l-f)>5||Math.abs(d-p)>5?r(l,d,f,p):i(l,d)})})},tr=function(){var n,t,e,r;return n={},e=function(t,e){var r;return(r=n[t])?r.push(e):n[t]=[e]},r=function(t,e){var r,i,o,u,a;if(t)if(e){if(a=n[t])for(r=i=0,o=a.length;o>i;r=++i)if(u=a[r],u===e){a.splice(r,1);break}}else delete n[t]},t=function(){var t,e,r,i,o,u;if(e=arguments[0],t=2<=arguments.length?Ou.call(arguments,1):[],u=n[e])for(r=0,i=u.length;i>r;r++)o=u[r],o.apply(null,t)},[e,r,t]},Tr=function(n,t,e,r,i,o,u){var a,s,c,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O;return l=Wr(n),f=l.baseCanvas,m=l.highlightCanvas,b=l.hoverCanvas,d=l.clipCanvas,x=l.maskCanvas,y=l.marquee,T=l.tooltip,k=l.mask,h=l.clip,O=n.regions.center,s=t.indices,a=void 0,W=function(t,r){var i,o,u,a,s;if(o=k.test(t,r),void 0!==o)for(i=d.context,i.clearRect(0,0,n.width,n.height),u=0,s=e.length;s>u;u++)if(a=e[u],i.save(),i.translate(O.left,O.top),a.mask([o],a.encoders,i,h),i.restore(),h.test(t,r))return o},p=function(n,t,e){var r;return r=qr(e),Qo(T),T.appendChild(r),T.style.display="block",C(n,t)},c=7,C=function(t,e){var r,i,o,u;if("none"!==T.style.display)return u=T.clientWidth,o=T.clientHeight,r=t+c,i=e-c-o,r+u>n.width&&(r=t-c-u),0>i&&(i=e+c),0>r&&(r=0),0>i&&(i=0),T.style.left=$o(r),T.style.top=$o(i)},v=function(){return T.style.display="none"},w=function(r,i){var o,s,c,l,f,h,d,g,m,w,y,_,k,x,S;if(l=W(r,i),l!==a){if(a=l,c=b.context,c.clearRect(0,0,n.width,n.height),v(),void 0!==l){for(c.save(),c.translate(O.left,O.top),f=0,d=e.length;d>f;f++)h=e[f],h.highlight([l],h.encoders,c);for(c.restore(),u("markhover",new vn(t,l)),x={},w=0,g=e.length;g>w;w++){h=e[w],_=h.encodings;for(o in _)if(s=_[o])if(s instanceof Dt)(S=s.vector)&&(x[S.label]=S.format(l));else if(s instanceof Lt)for(k=s.vectors,y=0,m=k.length;m>y;y++)S=k[y],x[S.label]=S.format(l)}p(r,i,x)}}else C(r,i)},g=function(r){var i,o,a,s;if(i=m.context,i.clearRect(0,0,n.width,n.height),r.length){for(f.element.style.opacity=.5,i.save(),i.translate(O.left,O.top),o=0,s=e.length;s>o;o++)a=e[o],a.highlight(r,a.encoders,i),a.render(r,a.encoders,i);i.restore(),u("markselect",new st(t,r))}else f.element.style.opacity=1,u("markdeselect",new V(t))},q=function(n,t){var e;e=W(n,t),g(void 0!==e?[e]:[])},N=function(n,t,r,i){var o,u,a,c,l,f,h;l=-O.left+(n>r?r:n),c=-O.left+(n>r?n:r),h=-O.top+(t>i?i:t),f=-O.top+(t>i?t:i),a=function(){var n,t,r;for(r=[],n=0,t=e.length;t>n;n++)o=e[n],r.push(o.select(s,o.encoders,l,h,c,f));return r}(),u=e.length>1?_.unique(_.flatten(a,!0)):_.head(a),g(u)},S=function(){var t,u,a,c,l,h,d,p;for(u=f.context,p=x.context,ou(u,i,O),uu(u,o,O),u.save(),u.translate(O.left,O.top),p.save(),p.translate(O.left,O.top),a=0,l=e.length;l>a;a++)c=e[a],c.render(s,c.encoders,u),c.mask(s,c.encoders,p,k);for(d=0,h=r.length;h>d;d++)t=r[d],t.render(t,i,o,u);p.restore(),u.restore(),nu(u,i,n.regions.bottom),tu(u,o,n.regions.left)},Se(b.element,y,w,N,q),new ie(l,t,W,g,w,q,N,S)},Zo=function(n,t,e,r,i){var o,u,a,s,c,l,h,d,p,v,g,m,w,b,y,_,k,x,C,S,q;if(n.font=zo.axisLabelFont,n.fillStyle=zo.axisLabelColor,n.strokeStyle=zo.axisTickColor,n.textBaseline="middle",
q=ae+4,m=e-q,n.save(),We(n,q,0,m,r),n.textAlign="right",S=e-5,h=e-6,t instanceof f){for(o=t.guide(),b=Math.floor(r/(ae+2)),a=Math.floor(o.length/b),s=c=0,p=o.length;p>c;s=++c)u=o[s],_=t.scale(u),C=-.5+Math.round(_),Ir(n,S,C,e,C),(0===a||0!==s&&0===s%a)&&n.fillText(u.value,h,_,m-6);Ir(n,e-.5,0,e-.5,r)}else{if(!(t instanceof Vn))throw new Error("Invalid axis type.");for(y=6,w=r-6,k=t.guide(),g=0,v=k.length;v>g;g++)x=k[g],l=x.label,_=t.scale(x.value),C=Math.max(.5,-.5+Math.round(_)),Ir(n,S,C,e,C),d=y>_?y:_>w?w:_,n.fillText(l,h,d,m-6);Ir(n,e-.5,0,e-.5,r)}return n.restore(),n.font=zo.axisTitleFont,n.textAlign="center",n.translate(q/2,r/2),n.rotate(i*fn),n.fillText(t.label,0,0,r),n.restore()},iu=function(n,t,e,r){var i,o,u,a,s;if(n.strokeStyle=zo.gridLineColor,t instanceof f)Ir(n,0,.5,e,.5),Ir(n,0,r-.5,e,r-.5);else if(t instanceof Vn){for(u=t.guide(),i=0,o=u.length;o>i;i++)a=u[i],s=Math.max(.5,-.5+Math.round(t.scale(a.value))),Ir(n,0,s,e,s);t.domain.min<=0&&0<=t.domain.max&&(n.strokeStyle=zo.originLineColor,s=Math.max(.5,-.5+Math.round(t.scale(0))),Ir(n,0,s,e,s))}},ou=function(n,t,e){return n.save(),n.translate(e.left,e.top+e.height),n.rotate(-fn),iu(n,t,e.height,e.width),n.restore()},uu=function(n,t,e){return n.save(),n.translate(e.left,e.top),iu(n,t,e.width,e.height),n.restore()},nu=function(n,t,e){return n.save(),n.translate(e.left,e.top+e.height),n.rotate(-fn),Zo(n,t,e.height,e.width,1),n.restore()},tu=function(n,t,e){return n.save(),n.translate(e.left,e.top),Zo(n,t,e.width,e.height,-1),n.restore()},au=function(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.childNodes[0]},yi=function(n,t){var e,r,i,o,u,a,s;for(r={},i=[],a=0,s=t.length;s>a;a++)o=t[a],u=(e=n.at(o)).key,r[u]||(r[u]=!0,i.push(e));return i},xr=function(n,t){var e,r,i,o,u,a;for(u=null,r=null,e=null,i=0,o=n.length;o>i;i++)if(a=n[i],null===u)switch(u=a.type){case zt:e=a,r=yi(a,t);break;case Xt:r=a.domain;break;default:throw new Error("ni")}else{if(u!==a.type)throw new Error("Incompatible axis vector ["+a.label+"]. Expect type ["+u+"], got ["+a.type+"]");switch(u){case zt:if(e!==a)throw new Error("Incompatible categorical vector ["+a.label+"]. Expected ["+e.label+"].");break;case Xt:r=Xe(r,a.domain);break;default:throw new Error("ni")}}return new bt(u,n,r)},$e=function(n){var t,e;return t=function(){var t,r,i;for(i=[],t=0,r=n.length;r>t;t++)e=n[t],i.push(e.label);return i}(),_.unique(t).join(", ")},Ie=function(n,t){var e,r,i,o,u,a,c,l,h,d,p,v,g;if(p=new Kn(0,0,400,400),e=He(n,"",t,new ft(0,p.width),p),d=ae+4+6+10,e instanceof f){for(l=0,r=e.guide(),o=0,u=r.length;u>o;o++)i=r[o],l<(c=(""+i.value).length)&&(l=c);return new s(Math.ceil(l*ae+d),Math.ceil(r.length*(ae+8)))}if(e instanceof Vn){for(l=0,r=e.guide(),v=e.guide(),h=0,a=v.length;a>h;h++)g=v[h],l<(c=g.label.length)&&(l=c);return new s(Math.ceil(l*ae+d),zo.visualizationSize.height)}throw new Error("Invalid axis type.")},He=function(n,t,e,r,i){var o,u,a,s,c;switch(n){case zt:return a=vr(e,r),o=function(){return e},new f(n,t,a,e,r,i,o);case Xt:return u=pr(e,r),a=u[0],s=u[1],c=u[2],o=function(n){var t,e,r,i,o,u;for(null==n&&(n=10),t=s(n),i=c(n),o=[],e=0,r=i.length;r>e;e++)u=i[e],o.push(new Ft(u,t(u)));return o},new kn(n,t,a,e,r,i,o);default:throw new Error("Unhandled axis type ["+n+"].")}},gu=function(n,t){var e,r;return r=wr(t),e=Uo(n,r),ki(t,ct)?vu(e,t):ki(t,Un)?hu(e,t):lu(e,t)},hu=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,v,g,m,w;return a=ki(t,Un),o=a.index,s=diecut("table.lz-record","tbody","tr","th","td"),l=s[0],f=s[1],p=s[2],d=s[3],h=s[4],v=function(){var t,e;t=n.schema,e=[];for(u in t)w=t[u],m=w.format(o),r=function(){switch(w.type){case zt:return void 0!==m?m:On;case Xt:return void 0!==m?_.escape(m):On;case It:return void 0!==m?m:On;default:throw new Error("Cannot render table cell of type "+w.type)}}(),e.push(p([d(_.escape(w.label)),h(r)]));return e}(),e=au(l(f(v))),c=_.noop,g=_.noop,i=_.noop,new An(e,c,g,i)},vu=function(n,t){var e,r,i,o,u,a,s,c,l,f,h,d,p,g,m,w,b,y,k,x,C,S,q,N,W;return c=ki(t,ct),N=function(){var t,e,i,o;if(c.fields.length){for(i=c.fields,o=[],t=0,e=i.length;e>t;t++)r=i[t],o.push(n.evaluate(r));return o}return n.vectors}(),W=_.flatten(N),a=diecut("table.lz-table","thead","tbody","tr","th","th.lz-number","td","td.lz-number"),f=a[0],w=a[1],h=a[2],k=a[3],m=a[4],b=a[5],d=a[6],p=a[7],y=function(){var n,t,e;for(e=[],n=0,t=W.length;t>n;n++)switch(q=W[n],q.type){case Xt:e.push(b(_.escape(q.label)));break;default:e.push(m(_.escape(q.label)))}return e}(),x=function(){var t,e,r,i;for(r=n.indices,i=[],t=0,e=r.length;e>t;t++)o=r[t],g=function(){var n,t,e;for(e=[],t=0,n=W.length;n>t;t++)switch(q=W[t],S=q.format(o),q.type){case zt:e.push(d(void 0!==S?S:On));break;case Xt:e.push(p(void 0!==S?_.escape(S):On));break;case It:e.push(d(void 0!==S?S:On));break;default:throw new Error("Cannot render table cell of type "+q.type)}return e}(),i.push(k(g));return i}(),e=au(f([w(k(y)),h(x)])),s=tr(),l=s[0],C=s[1],u=s[2],$(e).on("click",function(t){var e,r,i,o,a,s;switch(r=$(t.target),e=r.parent(),o=e.prop("tagName").toLowerCase(),s=r.prop("tagName").toLowerCase(),a=r.index(),i=e.index(),s){case"td":u("cellselect",new v(W[a],n.indices[i]));break;case"th":u("headerselect",new dn(W[a]))}}),i=_.noop,new An(e,l,C,i)},Me=function(n,t,e){return n.type===Xt?e?Xe(n.domain,e):t.type===zt?Yi(n.domain):n.domain:n.domain},lu=function(n,t){var r,i,o,u,a,l,f,h,d,p,v,g,m,w,b,y,k,x,C,S,q,N,W,T,O,E,Y,X,I,M;return b=_.map(bi(t,Nn),function(t){var e,r;return r=function(){var r,i,o,u;for(o=t.position.coordinates,u=[],r=0,i=o.length;i>r;r++)e=o[r],u.push(n.evaluate(e.field));return u}(),hr(t,_.flatten(r))}),O=_.map(b,function(n){return n.space}),X=Ci(O,function(n){return n.x}),I=Ci(O,function(n){return n.y}),W=xr(X,n.indices),T=xr(I,n.indices),g=Me(W,T,ki(t,G)),m=Me(T,W,ki(t,U)),i=Ie(W.type,g),o=Ie(T.type,m),h=null!=(C=ki(t,s))?C:new s(void 0,void 0),p=null!=(S=h.width)?S:Math.min(zo.maxCanvasSize.width,o.width+i.height),d=null!=(q=h.height)?q:Math.min(zo.maxCanvasSize.height,i.width+o.height),v=new c(p,d,new Sn(Math.min(.3*zo.maxCanvasSize.width,o.width),0,0,Math.min(.3*zo.maxCanvasSize.height,i.width))),u=v.regions.bottom,a=v.regions.left,k=new ft(0,u.width),x=T.type===Xt?new ft(a.height,0):new ft(0,a.height),l=He(W.type,$e(X),g,k,u),f=He(T.type,$e(I),m,x,a),w=_.map(b,function(t){var e,r,i,o,u;i=t.geometry,r=i.encode(n,t,l,f),e={};for(o in r)u=r[o],(null!=u?u.encode:void 0)&&(e[o]=u.encode);return new gn(r,e,i.mask,i.highlight,i.render,i.select)}),r=_.map(bi(t,e),function(n){return De(n)}),N=tr(),E=N[0],Y=N[1],y=N[2],M=Tr(v,n,w,r,l,f,y),M.render(),new An(M.viewport.container,E,Y,M.highlight)},qu=Er([L,Array,Function,function(n,t,e){return n.read(function(n,r){return n?e(n):qu(r,t,e)})}],[an,Array,Function,function(n,t,e){var r;try{return e(null,gu(n,t))}catch(i){return r=i,e(r)}}]),Fi=function(){return Sr(".lz-tooltip {\n  background: #2c2c2c;\n  color: #fff;\n  font-size: 12px;\n}\n.lz-tooltip th, .lz-tooltip td {\n  padding: 0px 4px;\n  vertical-align: middle;\n}\n.lz-tooltip th {\n  text-align: left;\n}\n.lz-table th, .lz-table td {\n  padding: 0px 8px;\n  vertical-align: middle;\n}\n.lz-table tbody > tr:nth-child(odd) {\n  background-color: #f3f3f3;\n}\n.lz-table .lz-number {\n  text-align: right;\n}\n.lz-record th, .lz-record td {\n  padding: 0px 8px;\n  vertical-align: middle;\n}\n.lz-record th {\n  text-align: right;\n}\n.lz-record tbody > tr:nth-child(odd) {\n  background-color: #f3f3f3;\n}")},ce=null,ae=18,Pi=function(){var n,t;return ce=n=Ge(new s(100,100)),t=n.context,t.font=zo.axisLabelFont,ae=t.measureText("M").width},se=!1,Ai=function(){return se?void 0:(Fi(),Pi(),se=!0)},Ui=function(){var n,t;return t=1<=arguments.length?Ou.call(arguments,0):[],(n=ki(t,L,an))?(Ai(),function(e){var r;return r=_.isElement(e)?function(n,t){return n?e.innerHTML=n.message:e.appendChild(t.element)}:_.isFunction(e)?e:void 0,r?qu(n,_.without(t,n),r):void 0}):function(){var n;return n=1<=arguments.length?Ou.call(arguments,0):[],Ui.apply(null,t.concat(n))}},Ui.VERSION="0.1.19",Ui.settings=zo,Ui.bounds=no,Ui.from=lo,Ui.value=Vo,Ui.range=Yo,Ui.position=Eo,Ui.fillColor=so,Ui.fillOpacity=co,Ui.strokeColor=jo,Ui.strokeOpacity=Lo,Ui.size=Po,Ui.width=Ho,Ui.height=go,Ui.lineWidth=ko,Ui.shape=Ao,Ui.tooltip=Bo,Ui.factor=ao,Ui.stack=Fo,Ui.groupBy=ho,Ui.where=Do,Ui.limit=yo,Ui.having=vo,Ui.eq=uo,Ui.ne=qo,Ui.lt=xo,Ui.gt=po,Ui.le=wo,Ui.ge=fo,Ui.like=bo,Ui.avg=Zi,Ui.count=eo,Ui.max=Co,Ui.min=So,Ui.sum=Ro,Ui.parse=Wo,Ui.point=Oo,Ui.rect=Xo,Ui.path=To,Ui.schema=Io,Ui.line=_o,Ui.select=Mo,Ui.dataPackage=ro,Ui.computed=to,Ui.createFrame=ar,Ui.createVector=Nr,Ui.createList=fr,Ui.createFactor=ir,Ui.domainX_HACK=io,Ui.domainY_HACK=oo,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=Ui:window.plot=Ui}).call(this);
